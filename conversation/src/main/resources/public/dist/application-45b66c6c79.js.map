{"version":3,"sources":["webpack:///webpack/bootstrap b08261c6ae2c65988f8e","webpack:////source/app.ts","webpack:///external \"entcore\"","webpack:////source/controller.ts","webpack:////source/model/conversation.ts","webpack:////source/model/folder.ts","webpack:///external \"_\"","webpack:////source/model/mail.ts","webpack:////source/model/user.ts","webpack:////source/model/quota.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACtCA,qCAA2B,CAAiB,CAAC;AAC7C,wCAAuC,CAAc,CAAC;AAEtD,iBAAM,CAAC,MAAM,CAAC,UAAU,cAAc;KAClC,cAAc;UACT,IAAI,CAAC,oBAAoB,EAAE;SACxB,MAAM,EAAE,UAAU;MACrB,CAAC;UACD,IAAI,CAAC,qBAAqB,EAAE;SACzB,MAAM,EAAE,WAAW;MACtB,CAAC;UACD,IAAI,CAAC,QAAQ,EAAE;SACZ,MAAM,EAAE,OAAO;MAClB,CAAC;UACD,SAAS,CAAC;SACP,UAAU,EAAE,QAAQ;MACvB,CAAC;AACV,EAAC,CAAC,CAAC;AAEH,aAAE,CAAC,WAAW,CAAC,IAAI,CAAC,mCAAsB,CAAC;;;;;;;;ACnB3C,0B;;;;;;;ACAA,qCAAqE,CAAiB,CAAC;AACvF,0CAA2F,CAAsB,CAAC;AAElH,oCAAkB,CAA4B,CAAC;AAC/C,wCAAkB,CAAoC,CAAC;AAE5C,+BAAsB,GAAG,YAAE,CAAC,UAAU,CAAC,wBAAwB,EAAE;KACxE,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK;SAC5E,MAAM,CAAC,eAAe,GAAG,EAAE,CAAC;SAC5B,MAAM,CAAC,SAAS,GAAG;aACf,SAAS,EAAE,KAAK;UACnB,CAAC;SACF,MAAM,CAAC,YAAY,GAAG,2BAAY,CAAC;SAEnC,MAAM,CAAC,QAAQ,GAAG,UAAU,IAAY,EAAE,IAAY;aAClD,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;aACxB,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;aAEzB,MAAM,CAAC,OAAO,GAAG,IAAI,mBAAI,EAAE,CAAC;aAC5B,MAAM,CAAC,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;aACnC,IAAI,SAAS,GAAG,gCAAgC,CAAC;aACjD,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,SAAS,GAAG,IAAI,GAAG,OAAO;SAC7D,CAAC;SAED,KAAK,CAAC;aACF,QAAQ,EAAE,UAAU,MAAM;iBACtB,2BAAY,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;iBACzC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;iBACjC,MAAM,CAAC,QAAQ,CAAC,IAAI,mBAAI,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;aACrD,CAAC;aACD,SAAS,EAAE,UAAU,MAAM;iBACvB,2BAAY,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;iBACzC,2BAAY,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,EAAE;qBAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;yBACxC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;yBACjC,IAAI,mBAAI,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,CAAC;6BACrC,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;6BACtC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;yBACzB,CAAC,CAAC,CAAC;qBACP,CAAC;qBACD,IAAI,CAAC,CAAC;yBACF,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC;qBACjC,CAAC;iBACL,CAAC,CAAC,CAAC;aACP,CAAC;aACD,KAAK,EAAE;iBACH,2BAAY,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;iBACzC,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;aACrC,CAAC;UACJ,CAAC,CAAC;SAEH,MAAM,CAAC,IAAI,GAAG,eAAI,CAAC;SACnB,MAAM,CAAC,MAAM,GAAG,gBAAM,CAAC;SACvB,MAAM,CAAC,OAAO,GAAG,2BAAY,CAAC,OAAO,CAAC;SACtC,MAAM,CAAC,WAAW,GAAG,2BAAY,CAAC,WAAW,CAAC;SAC9C,MAAM,CAAC,KAAK,GAAG,EAAE,IAAI,EAAE,2BAAY,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;SAChF,MAAM,CAAC,QAAQ,GAAG,2BAAY,CAAC,cAAc,CAAC;SAC9C,MAAM,CAAC,OAAO,GAAG,IAAI,mBAAI,EAAE,CAAC;SAC5B,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;SACjC,MAAM,CAAC,cAAc,GAAG,mBAAS,CAAC,QAAQ,CAAC,IAAI,CAAC;SAEhD,MAAM,CAAC,WAAW,GAAG;aACjB,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;aACxB,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;SAC7B,CAAC,CAAC;SAEF,MAAM,CAAC,aAAa,GAAG;aACnB,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;aAC1B,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;SAC/B,CAAC,CAAC;SAEF,MAAM,CAAC,UAAU,GAAG;aAChB,MAAM,CAAC,SAAS,EAAE,CAAC;SACvB,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG,UAAU,IAAI,EAAE,IAAI;aACtC,IAAI,SAAS,GAAG,gCAAgC,CAAC;aACjD,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC;SACvE,CAAC,CAAC;SAEF,MAAM,CAAC,UAAU,GAAG,UAAU,UAAU;aACpC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;iBACd,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,YAAY,yBAAU,CAAC,CAAC,CAAC;qBACnD,MAAM,CAAC,cAAc,CAAC,2BAAY,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;qBACtD,MAAM,CAAC;iBACX,CAAC;iBACD,UAAU,GAAI,2BAAY,CAAC,aAA8B,CAAC,UAAU,CAAC;aACzE,CAAC;aACD,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC;aACxB,2BAAY,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;aAC5C,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;SACxC,CAAC,CAAC;SAEF,MAAM,CAAC,cAAc,GAAG,UAAU,MAAM,EAAE,GAAG;aACzC,MAAM,CAAC,IAAI,GAAG,SAAS;aACvB,2BAAY,CAAC,aAAa,GAAG,MAAM;aACnC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK;aACzB,MAAM,CAAC,UAAU,GAAG,CAAC;aACrB,GAAG,CAAC,QAAQ,GAAG,EAAE;aACjB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;iBACpB,QAAQ,CAAC;qBACL,GAAG,CAAC,QAAQ,GAAG,gBAAgB;iBACnC,CAAC,EAAE,EAAE,CAAC;aACV,CAAC,CAAC;aACF,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE;aACnB,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;aAElC,QAAQ,CAAC;iBACL,UAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;aACzC,CAAC,EAAE,GAAG,CAAC;SACX,CAAC,CAAC;SAEF,MAAM,CAAC,UAAU,GAAG,UAAU,MAAM,EAAE,YAAY;aAC9C,EAAE,CAAC,CAAC,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC;iBAC5C,MAAM,CAAC,KAAK;aAEhB,IAAI,QAAQ,GAAG,YAAY,CAAC,YAAY;aACxC,OAAO,QAAQ,EAAE,CAAC;iBACd,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,QAAQ,CAAC,EAAE,CAAC;qBAC1B,MAAM,CAAC,IAAI;iBACf,QAAQ,GAAG,QAAQ,CAAC,YAAY;aACpC,CAAC;aACD,MAAM,CAAC,KAAK;SAChB,CAAC;SAED,MAAM,CAAC,eAAe,GAAG,UAAU,IAAI;aACnC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,KAAK,MAAM,CAAC;iBACvD,MAAM,CAAC,OAAO;aAClB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,KAAK,MAAM,CAAC;iBACvD,MAAM,CAAC,QAAQ;aACnB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,KAAK,OAAO,CAAC;iBACxD,MAAM,CAAC,OAAO;aAClB,MAAM,CAAC,EAAE;SACb,CAAC;SAED,MAAM,CAAC,eAAe,GAAG,UAAU,IAAI;aACnC,IAAI,YAAY,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;aAC/C,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC;iBACzB,MAAM,CAAC,SAAS;aACpB,EAAE,CAAC,CAAC,YAAY,KAAK,QAAQ,CAAC;iBAC1B,MAAM,CAAC,UAAU;aACrB,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC;iBACzB,MAAM,CAAC,UAAU;aACrB,MAAM,CAAC,EAAE;SACb,CAAC;SAED,MAAM,CAAC,kBAAkB,GAAG,UAAU,IAAI;aACtC,IAAI,YAAY,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;aAC/C,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC;iBACzB,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC;aACjC,IAAI,CAAC,EAAE,CAAC,CAAC,YAAY,KAAK,QAAQ,CAAC;iBAC/B,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;aAChC,IAAI;iBACA,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;SACpC,CAAC;SAED,MAAM,CAAC,oBAAoB,GAAG,UAAU,KAAK,EAAE,IAAI;aAC/C,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,UAAU,IAAI;iBAC/D,IAAI,CAAC,gBAAgB,EAAE,CAAC;aAC5B,CAAC,CAAC,CAAC;aACH,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;SACvD,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG;aACd,2BAAY,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;SAC1C,CAAC,CAAC;SAEF,MAAM,CAAC,eAAe,GAAG;aACrB,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC;iBAC7B,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;iBAC7C,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC;qBACvC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC,SAAS,EAAE;aAC1D,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;iBAC/C,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC;qBACvC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC,WAAW,EAAE;aAC5D,CAAC;SACL,CAAC,CAAC;SAEF,wBAAwB,IAAI,EAAE,WAAqB;aAC/C,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC;aAChD,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;aAC/C,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC;iBACb,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC;aAC7D,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;SACvB,CAAC;SAED,MAAM,CAAC,QAAQ,GAAG,UAAU,IAAI;aAC5B,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;aACrC,cAAc,CAAC,IAAI,CAAC,CAAC;aACrB,IAAI,CAAC,IAAI,EAAE,CAAC;SAChB,CAAC,CAAC;SAEF,MAAM,CAAC,OAAO,GAAG;aACb,gBAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACxB,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAC3C,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;SAC7C,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG,UAAU,IAAI;aAC5B,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;aACrC,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;aAC3B,IAAI,CAAC,IAAI,CAAC;iBACN,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;qBACd,kBAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;iBAClC,CAAC;iBACD,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;aACvC,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG;aACd,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;aACtC,MAAM,CAAC,OAAO,CAAC,kBAAkB,GAAG,MAAM,CAAC,IAAI,CAAC;aAChD,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;aACvD,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SACxD,CAAC,CAAC;SAEF,MAAM,CAAC,KAAK,GAAG;aACX,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;aACtC,MAAM,CAAC,OAAO,CAAC,kBAAkB,GAAG,MAAM,CAAC,IAAI,CAAC;aAChD,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;aACpD,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;SACzC,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG;aACd,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;aACtC,MAAM,CAAC,OAAO,CAAC,kBAAkB,GAAG,MAAM,CAAC,IAAI,CAAC;aAChD,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,EAAC,OAAO,EAAE,IAAI,CAAC,CAAC;aACzD,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,cAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,MAAM,EAAC,CAAC,CAAC;aACvG,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,cAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,IAAI;iBAC1D,MAAM,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,MAAM,IAAI,CAAC,cAAC,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC;aAC1F,CAAC,CAAC;aACF,EAAE,CAAC,CAAC,CAAC,cAAC,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;iBACjE,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;SAC7C,CAAC,CAAC;SAEF,MAAM,CAAC,SAAS,GAAG,UAAU,KAAK;aAC9B,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;aACtC,KAAK,CAAC,IAAI,EAAE,CAAC;aACb,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;SAC3B,CAAC,CAAC;SAEF,MAAM,CAAC,SAAS,GAAG;aACf,gBAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;aAE3B,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;aACrD,MAAM,CAAC,UAAU,CAAC,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;SAC7D,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG;aACd,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;aACtB,MAAM,CAAC,UAAU,CAAC,2BAAY,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;SAC9D,CAAC,CAAC;SAEF,MAAM,CAAC,OAAO,GAAG;aACb,EAAE,CAAC,CAAC,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;iBACxD,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;aAC9C,EAAE,CAAC,CAAC,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;iBACzC,IAAI,QAAQ,GAAG,IAAI,uBAAQ,CAAC,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,MAAM,EAAE;qBACnF,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE;qBAC7C,MAAM,CAAC,cAAc,EAAE;iBAC3B,CAAC,CAAC;iBACF,cAAC,CAAC,OAAO,CAAC,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,UAAU,UAAU;qBAC9E,UAAU,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;yBACtB,QAAQ,CAAC,MAAM,EAAE;qBACrB,CAAC,CAAC;iBACN,CAAC,CAAC;aACN,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,eAAe,GAAG;aACrB,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBAC1D,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;aACnD,CAAC;aACD,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC;iBACzC,IAAI,QAAQ,GAAG,IAAI,uBAAQ,CAAC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,MAAM,EAAE;qBACnF,2BAAY,CAAC,aAAa,CAAC,IAAI,EAAE;qBACjC,MAAM,CAAC,cAAc,EAAE;qBACvB,MAAM,CAAC,QAAQ,EAAE;iBACrB,CAAC,CAAC;iBACF,cAAC,CAAC,OAAO,CAAC,2BAAY,CAAC,aAAa,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,UAAU,UAAU;qBAC9E,UAAU,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;yBACrB,QAAQ,CAAC,MAAM,EAAE;qBACrB,CAAC,CAAC;iBACN,CAAC,CAAC;aACN,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG,UAAU,IAAI;aAChC,IAAI,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACjC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,eAAe;iBACxD,SAAS,CAAC,IAAI,CAAC;qBACX,OAAO,EAAE,IAAI;qBACb,WAAW,EAAE,eAAe;kBAC/B,CAAC,CAAC;aACP,CAAC,CAAC,CAAC;aACH,MAAM,CAAC,SAAS,CAAC;SACrB,CAAC;SAED,MAAM,CAAC,WAAW,GAAG,UAAU,IAAI;aAC/B,MAAM,CAAC,UAAU,IAAI;iBACjB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;qBACf,MAAM,CAAC,IAAI;iBACf,CAAC;iBACD,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;iBAC3B,MAAM,CAAC,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,MAAM,CAAC,WAAW,KAAK,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC;aACtH,CAAC;SACL,CAAC;SAED,MAAM,CAAC,kBAAkB,GAAG;aACxB,IAAI,OAAO,GAAG,EAAE,CAAC;aACjB,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC;aACtC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;iBACd,OAAO,GAAG,cAAC,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,IAAI;qBACpD,MAAM,CAAC,IAAI,mBAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC3D,CAAC,CAAC,CAAC;aACP,CAAC;aACD,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,2BAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;SAChG,CAAC,CAAC;SAEF,MAAM,CAAC,gBAAgB,GAAG;aACtB,IAAI,OAAO,GAAG,EAAE,CAAC;aACjB,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC;aACtC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;iBACd,OAAO,GAAG,cAAC,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,IAAI;qBACpD,MAAM,CAAC,IAAI,mBAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC3D,CAAC,CAAC,CAAC;aACP,CAAC;aACD,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,2BAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;SAC5F,CAAC,CAAC;SAEF,MAAM,CAAC,OAAO,GAAG,UAAU,IAAI;aAC3B,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;iBACrB,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;aAC3B,CAAC;aACD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;iBACP,MAAM,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;aAC1C,CAAC;aACD,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;SAC3D,CAAC,CAAC;SAEF,MAAM,CAAC,UAAU,GAAG,UAAU,IAAI;aAC9B,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,cAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/F,CAAC,CAAC;SAEF,MAAM,CAAC,SAAS,GAAG,UAAU,IAAI;aAC7B,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;iBACrB,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;aAC3B,CAAC;aACD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;iBACP,MAAM,CAAC,OAAO,CAAC,iBAAiB,GAAG,IAAI,CAAC;aAC5C,CAAC;aACD,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;SAC7D,CAAC,CAAC;SAEF,MAAM,CAAC,YAAY,GAAG,UAAU,IAAI;aAChC,MAAM,CAAC,OAAO,CAAC,EAAE,GAAG,cAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,UAAU,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/F,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG,kBAAQ;SAC1B,MAAM,CAAC,QAAQ,GAAG,EAAE;SAEpB,MAAM,CAAC,kBAAkB,GAAG,EAAE,QAAQ,EAAE,sBAAsB,EAAE;SAChE,MAAM,CAAC,cAAc,GAAG;aACpB,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;iBACpB,MAAM,CAAC,kBAAkB,CAAC,QAAQ,GAAG,EAAE;iBACvC,QAAQ,CAAC;qBACL,MAAM,CAAC,MAAM,EAAE;qBACf,MAAM,CAAC,kBAAkB,CAAC,QAAQ,GAAG,sBAAsB;iBAC/D,CAAC,EAAE,GAAG,CAAC;aACX,CAAC,CAAC;SACN,CAAC;SAED,MAAM,CAAC,kBAAkB,GAAG;aACxB,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,aAAa,YAAY,yBAAU,CAAC,CAAC;iBAC9C,MAAM,CAAC,CAAC;aAEZ,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;SACxC,CAAC;SAED,MAAM,CAAC,aAAa,GAAG;aACnB,MAAM,CAAC,WAAW,GAAG,EAAE;aACvB,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;aAC3B,kBAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,WAAW,CAAC;SAC1C,CAAC;SAED,MAAM,CAAC,iBAAiB,GAAG,UAAU,MAAM,EAAE,GAAG;aAC5C,GAAG,CAAC,QAAQ,GAAG,EAAE;aAEjB,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;iBAClC,QAAQ,CAAC;qBACL,GAAG,CAAC,QAAQ,GAAG,sBAAsB;iBACzC,CAAC,EAAE,EAAE,CAAC;iBACN,MAAM;aACV,CAAC;aAED,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;iBACpB,QAAQ,CAAC;qBACL,GAAG,CAAC,QAAQ,GAAG,sBAAsB;iBACzC,CAAC,EAAE,EAAE,CAAC;aACV,CAAC,CAAC;SACN,CAAC;SAED,MAAM,CAAC,YAAY,GAAG,UAAU,YAAY;aACxC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK;aAC5B,kBAAQ,CAAC,KAAK,CAAC,UAAU,CAAC;aAC1B,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,aAAa,CAAC,YAAY,CAAC;SAChE,CAAC;SAED,MAAM,CAAC,iBAAiB,GAAG;aACvB,MAAM,CAAC,SAAS,GAAG,IAAI,yBAAU,EAAE,CAAC;aACpC,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,YAAY,yBAAU,CAAC,CAAC,CAAC;iBACnD,MAAM,CAAC,SAAS,CAAC,cAAc,GAAI,2BAAY,CAAC,aAA4B,CAAC,EAAE,CAAC;aACpF,CAAC;aAED,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;aAC3B,kBAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,eAAe,CAAC;SAC9C,CAAC;SACD,MAAM,CAAC,YAAY,GAAG;aAClB,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;iBAC3B,MAAM,CAAC,cAAc,EAAE;aAC3B,CAAC,CAAC;aACF,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK;aAC5B,kBAAQ,CAAC,KAAK,CAAC,UAAU,CAAC;SAC9B,CAAC;SACD,MAAM,CAAC,oBAAoB,GAAG,UAAU,MAAM;aAC1C,MAAM,CAAC,YAAY,GAAG,IAAI,yBAAU,EAAE;aACtC,MAAM,CAAC,YAAY,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI;aACtC,MAAM,CAAC,YAAY,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE;aAClC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;aAC3B,kBAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,eAAe,CAAC;SAC9C,CAAC;SACD,MAAM,CAAC,YAAY,GAAG;aAClB,IAAI,OAAO,GAAG,MAAM,CAAC,aAAa;aAClC,MAAM,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;iBAC9B,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC,YAAY,CAAC,IAAI;iBACvC,MAAM,CAAC,MAAM,EAAE;aACnB,CAAC,CAAC;aACF,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK;aAC5B,kBAAQ,CAAC,KAAK,CAAC,UAAU,CAAC;SAC9B,CAAC;SACD,MAAM,CAAC,WAAW,GAAG,UAAU,MAAM;aACjC,MAAM,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC;iBAChB,MAAM,CAAC,cAAc,EAAE;iBACvB,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC;aAC9B,CAAC,CAAC;SACN,CAAC;SACD,MAAM,CAAC,aAAa,GAAG,UAAU,MAAM;aACnC,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;iBAClB,MAAM,CAAC,cAAc,EAAE;aAC3B,CAAC,CAAC;SACN,CAAC;SACD,MAAM,CAAC,YAAY,GAAG,UAAU,MAAM;aAClC,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC;iBACjB,MAAM,CAAC,cAAc,EAAE;aAC3B,CAAC,CAAC;SACN,CAAC;SAED,IAAI,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;SAC9C,UAAU,CAAC,GAAG,GAAG,cAAI,CAAC,KAAK,GAAG,IAAI,GAAG,6BAA6B;SAClE,MAAM,CAAC,IAAI,GAAG,UAAU,IAAI,EAAE,cAAc;aACxC,cAAc,CAAC,YAAY,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;aAC3D,IAAI,CAAC;iBACD,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;aAClF,CAAE;aAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACT,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;aACtE,CAAC;SACL,CAAC,CAAC;SACF,MAAM,CAAC,aAAa,GAAG,UAAU,UAAU;aACvC,MAAM,CAAC,UAAU,KAAK;iBAClB,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,GAAG,kBAAkB;qBAC9H,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,GAAG,kBAAkB;yBAC3G,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM;6BACnF,SAAS,CAAC;iBAEtB,EAAE,CAAC,CAAC,UAAU,CAAC,WAAW,IAAI,UAAU,CAAC,WAAW,KAAK,OAAO,CAAC;qBAC7D,MAAM,CAAC,SAAS,CAAC;iBAErB,MAAM,CAAC,SAAS,CAAC;aACrB,CAAC;SACL,CAAC,CAAC;SAEF,MAAM,CAAC,MAAM,GAAG,UAAU,UAAU,EAAE,cAAc;aAChD,IAAI,SAAS,GAAG,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,cAAc,CAAC;aAChE,IAAI,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;aAE7E,EAAE,CAAC,CAAC,UAAU,CAAC,UAAU,KAAK,OAAO,CAAC;iBAClC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;aACnC,IAAI;iBACA,MAAM,CAAC,QAAQ,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;SAClD,CAAC,CAAC;SAEF,MAAM,CAAC,QAAQ,GAAG,UAAU,IAAI,EAAE,MAAM;aACpC,IAAI,OAAO,GAAG,IAAI,mBAAI,EAAE;aACxB,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;aACpB,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;SACxB,CAAC;SACD,MAAM,CAAC,SAAS,GAAG,UAAU,IAAI;aAC7B,IAAI,OAAO,GAAG,IAAI,mBAAI,EAAE;aACxB,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;aACpB,OAAO,CAAC,KAAK,EAAE;SACnB,CAAC;SAED,4EAA4E;SAC5E,MAAM,CAAC,sBAAsB,GAAG,oBAAK,CAAC,mBAAmB,CAAC;SAE1D,MAAM,CAAC,UAAU,GAAG,UAAU,IAAI;aAC9B,IAAI,aAAa,GAAG,MAAM,CAAC,sBAAsB,CAAC,IAAI,CAAC;aACvD,MAAM,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,aAAa,CAAC,KAAK;SAC/E,CAAC;SAGD,MAAM,CAAC,eAAe,GAAG;aACrB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;iBACrB,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC;sBAC/C,IAAI,CAAC,cAAM,aAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAhC,CAAgC,CAAC,CAAC;aACtD,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC;aACrC,CAAC;SACL,CAAC;SAED,MAAM,CAAC,gBAAgB,GAAG,UAAU,KAAK,EAAE,UAAU,EAAE,IAAI;aACvD,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;SACtC,CAAC;SAED,MAAM,CAAC,KAAK,GAAG,oBAAK,CAAC;SAErB,MAAM,CAAC,MAAM,GAAG;aACZ,IAAI,EAAE,UAAU,IAAI;iBAChB,IAAI,YAAY,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;iBAC/C,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC,CAAC,CAAC;qBAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;yBACd,MAAM,CAAC,IAAI,CAAC,QAAQ;qBACxB,IAAI;yBACA,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,WAAW;iBACxC,CAAC;iBACD,MAAM,CAAC,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC;sBAC5B,MAAM,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC;sBAC1D,GAAG,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE;aACzD,CAAC;aACD,OAAO,EAAE,UAAU,IAAI;iBACnB,MAAM,CAAC,IAAI,CAAC,OAAO;aACvB,CAAC;aACD,IAAI,EAAE,UAAU,IAAI;iBAChB,MAAM,CAAC,IAAI,CAAC,IAAI;aACpB,CAAC;aACD,YAAY,EAAE,UAAU,IAAI;iBACxB,IAAI,YAAY,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;iBAC/C,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC;qBACzB,MAAM,CAAC,CAAC;iBACZ,EAAE,CAAC,CAAC,YAAY,KAAK,QAAQ,CAAC;qBAC1B,MAAM,CAAC,CAAC;iBACZ,EAAE,CAAC,CAAC,YAAY,KAAK,OAAO,CAAC;qBACzB,MAAM,CAAC,CAAC;iBACZ,MAAM,CAAC,CAAC;aACZ,CAAC;UACJ;SACD,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,OAAO;aACnC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC;iBACvB,GAAG,CAAC,OAAO,GAAG,CAAC,GAAG,CAAC,OAAO;aAC9B,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,GAAG,CAAC,IAAI,GAAG,OAAO;iBAClB,GAAG,CAAC,OAAO,GAAG,KAAK;aACvB,CAAC;SACL,CAAC;KACL,CAAC,CAAC,CAAC,CAAC;;;;;;;;ACtjBR,kDAAiD;AACjD,GAAE;AACF,uFAAsF;AACtF,GAAE;AACF,wEAAuE;AACvE,kEAAiE;AACjE,yEAAwE;AACxE,GAAE;AACF,wEAAuE;AACvE,2EAA0E;AAC1E,+EAA8E;AAC9E,kFAAiF;AACjF,GAAE;AACF,mEAAkE;AAClE,kEAAiE;AACjE,wDAAuD;;;;;;;;;;AAEvD,qCAAsE,CAAiB,CAAC;AAIxF,oCAAyF,CAAU,CAAC;AACpG,kCAA6C,CAAQ,CAAC;AACtD,mCAAsB,CAAS,CAAC;AAEhC;KAII,kBAAY,SAAS,EAAE,MAAM;SACzB,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;SACvB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACzB,CAAC;KAED,yBAAM,GAAN;SACI,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aAChB,IAAI,CAAC,MAAM,EAAE;SACjB,CAAC;KACL,CAAC;KACL,eAAC;AAAD,EAAC;AAdY,iBAAQ,WAcpB;AAED;KAA2B,gCAAK;KAQ5B;SARJ,iBAyCC;SAhCO,iBAAO,CAAC;SAER,IAAI,CAAC,UAAU,CAAC,WAAI,EAAE,IAAI,YAAK,CAAC,CAAC;SACjC,IAAI,CAAC,UAAU,CAAC,eAAM,EAAE,IAAI,sBAAa,EAAE,CAAC,CAAC;SAE7C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;SAEjC,IAAI,CAAC,UAAU,CAAC,mBAAU,EAAE;aACxB,IAAI,EAAE,UAAU,IAAgB;iBAA1B,iBAUL;iBATG,cAAI,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;qBACjC,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,KAAI,CAAC,OAAO,CAAC,UAAU,IAAI;yBACvB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;qBAC3B,CAAC,CAAC;qBACF,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC;yBAC7B,IAAI,EAAE,CAAC;qBACX,CAAC;iBACL,CAAC,CAAC;aACN,CAAC;UACJ,CAAC,CAAC;SAEH,cAAI,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;aAChC,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;aACpD,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC3B,CAAC,CAAC,CAAC;KACP,CAAC;KAED,2BAAI,GAAJ;SACI,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;SACxB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SAClB,aAAK,CAAC,OAAO,EAAE,CAAC;KACpB,CAAC;KACL,mBAAC;AAAD,EAAC,CAzC0B,eAAK,GAyC/B;AAEU,qBAAY,GAAG,IAAI,YAAY,EAAE,CAAC;AAE7C,gBAAK,CAAC,KAAK,GAAG;KACV,oBAAY,CAAC,IAAI,EAAE,CAAC;AACxB,EAAC,CAAC;AAGF,8BAAc,CAAU,CAAC;AACzB,8BAAc,CAAQ,CAAC;AACvB,8BAAc,CAAQ,CAAC;AACvB,8BAAc,CAAS,CAAC;;;;;;;;;;;;;;AC9FxB,qCAA+C,CAAiB,CAAC;AACjE,wCAAkB,CAAoC,CAAC;AACvD,0CAA6B,CAAgB,CAAC;AAC9C,kCAA6C,CAAQ,CAAC;AACtD,mCAAsB,CAAS,CAAC;AAEhC;KAA4B,0BAAK;KAAjC;SAA4B,8BAAK;KAYjC,CAAC;KANG,yBAAQ,GAAR;SACI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;aACnB,IAAI,CAAC,UAAU,EAAE,CAAC;aAClB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;SACvE,CAAC;KACL,CAAC;KACL,aAAC;AAAD,EAAC,CAZ2B,eAAK,GAYhC;AAZY,eAAM,SAYlB;AAED;KAAkC,gCAAM;KAGpC,sBAAY,GAAG;SACX,kBAAM,GAAG,CAAC,CAAC;SAEX,IAAI,UAAU,GAAG,IAAI;SACrB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAEpB,IAAI,CAAC,UAAU,CAAC,WAAI,EAAE,IAAI,YAAK,CAAC,GAAG,CAAC,CAAC,CAAC;KAC1C,CAAC;KACL,mBAAC;AAAD,EAAC,CAXiC,MAAM,GAWvC;AAXY,qBAAY,eAWxB;AAED;KAA2B,yBAAY;KACnC;SACI,kBAAM;aACF,GAAG,EAAE,0BAA0B;UAClC,CAAC,CAAC;SAEH,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;SAE1B,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;aACxB,IAAI,EAAE;iBACF,IAAI,IAAI,GAAG,IAAI;iBACf,cAAI,EAAE,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;qBACjD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;iBACnB,CAAC,CAAC;aACN,CAAC;UACJ,CAAC,CAAC;KACP,CAAC;KAED,4BAAY,GAAZ;SACI,cAAI,EAAE,CAAC,GAAG,CAAC,wBAAwB,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC;aACnD,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC;UAC5C,CAAC,CAAC,CAAC;SACJ,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;SAC7B,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SAC3C,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SAC3C,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;KAC/C,CAAC;KAED,2BAAW,GAAX;SACI,IAAI,OAAO,GAAG,cAAI,EAAE,CAAC,MAAM,CAAC,uBAAuB,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC;aACnE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC;UAC5C,CAAC,CAAC,CAAC;SACJ,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;SAC5B,MAAM,CAAC,OAAO,CAAC;KACnB,CAAC;KACL,YAAC;AAAD,EAAC,CAnC0B,YAAY,GAmCtC;AAnCY,cAAK,QAmCjB;AAED;KAA2B,yBAAY;KACnC;SACI,kBAAM;aACF,GAAG,EAAE,0BAA0B;UAClC,CAAC,CAAC;SAEH,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;KAC9B,CAAC;KAED,2BAAW,GAAX;SAAA,iBAIC;SAHG,cAAI,EAAE,CAAC,GAAG,CAAC,2BAA2B,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;aAChE,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzC,CAAC,CAAC,CAAC;KACP,CAAC;KACL,YAAC;AAAD,EAAC,CAd0B,YAAY,GActC;AAdY,cAAK,QAcjB;AAED;KAA2B,yBAAY;KACnC;SACI,kBAAM;aACF,GAAG,EAAE,0BAA0B;UAClC,CAAC,CAAC;SAEH,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC;KAC9B,CAAC;KAED,yBAAS,GAAT,UAAU,KAAW;SAArB,iBAOC;SANG,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;aAC/B,KAAK,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC;iBACrB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACvB,OAAO,EAAE,CAAC;aACd,CAAC,CAAC,CAAC;SACP,CAAC,CAAC,CAAC;KACP,CAAC;KAED,wBAAQ,GAAR,UAAS,IAAU;SACf,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,EAAE;aACzB,cAAI,EAAE,CAAC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,GAAG,WAAW,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;iBAC1D,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;qBAC/C,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC1E,CAAC;iBACD,aAAK,CAAC,OAAO,EAAE,CAAC;aACpB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,IAAI;iBACnB,gBAAM,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;aAC5B,CAAC,CAAC;SACN,CAAC,CAAC,CAAC;KACP,CAAC;KACL,YAAC;AAAD,EAAC,CA9B0B,YAAY,GA8BtC;AA9BY,cAAK,QA8BjB;AAED;KAA4B,0BAAY;KACpC;SACI,kBAAM;aACF,GAAG,EAAE,2BAA2B;UACnC,CAAC,CAAC;SAEH,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;KAC/B,CAAC;KACL,aAAC;AAAD,EAAC,CAR2B,YAAY,GAQvC;AARY,eAAM,SAQlB;AAED;KAAgC,8BAAM;KAMlC,oBAAY,IAAK;SACb,kBAAM,IAAI,CAAC,CAAC;SAEZ,IAAI,UAAU,GAAG,IAAI;SACrB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SAEpB,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;aACxB,IAAI,EAAE,UAAU,IAAiB;iBAC7B,IAAI,IAAI,GAAG,IAAI;iBACf,cAAI,EAAE,CAAC,GAAG,CAAC,wBAAwB,GAAG,UAAU,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;qBACpE,cAAC,CAAC,OAAO,CAAC,IAAI,EAAE,UAAU,IAAI;yBAC1B,IAAI,CAAC,YAAY,GAAG,UAAU;qBAClC,CAAC,CAAC;qBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;qBACf,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI;yBACvB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;qBAC3B,CAAC,CAAC;qBAEF,EAAE,CAAC,CAAC,OAAO,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC;yBAC7B,IAAI,EAAE,CAAC;qBACX,CAAC;iBAEL,CAAC,CAAC;aACN,CAAC;UACJ,CAAC;SAEF,IAAI,CAAC,UAAU,CAAC,WAAI,EAAE;aAClB,OAAO,EAAE;iBACL,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;iBACpB,IAAI,CAAC,IAAI,EAAE,CAAC;aAChB,CAAC;aACD,IAAI,EAAE,UAAU,UAAU,EAAE,SAAS;iBACjC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;qBACd,UAAU,GAAG,CAAC,CAAC;iBACnB,CAAC;iBACD,IAAI,IAAI,GAAG,IAAI,CAAC;iBAChB,cAAI,EAAE,CAAC,GAAG,CAAC,qBAAqB,GAAG,UAAU,CAAC,EAAE,GAAG,kBAAkB,GAAG,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;qBACnG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAC,CAAC,CAAC;qBACrD,EAAE,CAAC,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;yBACtB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;yBACpB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;6BACpB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;yBACrB,CAAC;qBACL,CAAC;qBACD,IAAI,CAAC,CAAC;yBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACpB,CAAC;iBACL,CAAC,CAAC,CAAC;aACP,CAAC;aACD,WAAW,EAAE;iBACT,cAAI,EAAE,CAAC,GAAG,CAAC,sBAAsB,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;qBAChG,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;iBAC/C,CAAC,CAAC,CAAC;iBACH,IAAI,CAAC,eAAe,EAAE,CAAC;aAC3B,CAAC;aACD,aAAa,EAAE,UAAU,iBAAiB;iBACtC,cAAI,EAAE,CAAC,GAAG,CAAC,kBAAkB,GAAG,iBAAiB,CAAC,EAAE,GAAG,GAAG,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;qBACzH,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;iBAC/C,CAAC,CAAC,CAAC;aACP,CAAC;aACD,gBAAgB,EAAE;iBACd,MAAM,CAAC,cAAI,EAAE,CAAC,GAAG,CAAC,YAAY,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;aAC/F,CAAC;UACJ,CAAC,CAAC;KACP,CAAC;KAED,0BAAK,GAAL;SACI,IAAI,KAAK,GAAG,CAAC,CAAC;SACd,IAAI,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;SACjC,OAAO,QAAQ,EAAE,CAAC;aACd,QAAQ,GAAG,QAAQ,CAAC,YAAY,CAAC;aACjC,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;SACtB,CAAC;SACD,MAAM,CAAC,KAAK,CAAC;KACjB,CAAC;KAED,2BAAM,GAAN;SACI,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,cAAc,GAAG;aAC9B,IAAI,EAAE,IAAI,CAAC,IAAI;UAClB,GAAG;aACI,IAAI,EAAE,IAAI,CAAC,IAAI;aACf,QAAQ,EAAE,IAAI,CAAC,cAAc;UAChC;SAEL,MAAM,CAAC,cAAI,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;KAC3C,CAAC;KAED,2BAAM,GAAN;SACI,IAAI,IAAI,GAAG;aACP,IAAI,EAAE,IAAI,CAAC,IAAI;UAClB;SACD,MAAM,CAAC,cAAI,EAAE,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC;KACpD,CAAC;KAED,0BAAK,GAAL;SACI,MAAM,CAAC,cAAI,EAAE,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,EAAE,CAAC;KAChD,CAAC;KAED,4BAAO,GAAP;SACI,MAAM,CAAC,cAAI,EAAE,CAAC,GAAG,CAAC,iBAAiB,GAAG,IAAI,CAAC,EAAE,CAAC;KAClD,CAAC;KAED,2BAAM,GAAN;SACI,MAAM,CAAC,cAAI,EAAE,CAAC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC;KAC7C,CAAC;KACL,iBAAC;AAAD,EAAC,CA/G+B,MAAM,GA+GrC;AA/GY,mBAAU,aA+GtB;AAED;KASI;SATJ,iBAkCC;SAxBO,IAAI,CAAC,IAAI,GAAG;aACR,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,KAAK,IAAI,CAAC,CAAC,CAAC;iBACtC,2BAAY,CAAC,aAAa,GAAG,KAAI,CAAC,KAAK,CAAC;aAC5C,CAAC;aAED,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,KAAI,CAAC,UAAU,EAAE,CAAC,CAAC;SAC3E,CAAC,CAAC;SAEF,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;SACzB,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;SACzB,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;SACzB,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;KAC/B,CAAC;KAED,kCAAU,GAAV,UAAY,UAAU;SAClB,2BAAY,CAAC,aAAa,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC;SAC9C,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;SACxC,2BAAY,CAAC,aAAa,CAAC,UAAU,GAAG,CAAC,CAAC;SAC1C,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;SAC9C,EAAE,CAAC,CAAC,2BAAY,CAAC,aAAa,YAAY,KAAK,CAAC,CAAC,CAAC;aAC7C,2BAAY,CAAC,aAAuB,CAAC,WAAW,CAAC,IAAI,EAAE;SAC5D,CAAC;SACD,2BAAY,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;KACjD,CAAC;KACL,oBAAC;AAAD,EAAC;AAlCY,sBAAa,gBAkCzB;;;;;;;;ACnRD,oB;;;;;;;;;;;;ACAA,qCAAsE,CAAiB,CAAC;AACxF,oCAAuB,CAA4B,CAAC;AACpD,wCAAkB,CAAoC,CAAC;AAEvD,kCAAqB,CAAQ,CAAC;AAC9B,0CAA6B,CAAgB,CAAC;AAC9C,mCAAsB,CAAS,CAAC;AAGhC;KAWI,oBAAY,IAAU;SAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SACjB,IAAI,CAAC,QAAQ,GAAG;aACZ,KAAK,EAAE,GAAG;aACV,UAAU,EAAE,CAAC;UAChB;KACL,CAAC;KACL,iBAAC;AAAD,EAAC;AAlBY,mBAAU,aAkBtB;AAED;KAA0B,wBAAK;KAe3B,cAAY,IAAK;SACb,kBAAM,IAAI,CAAC,CAAC;SACZ,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;SAC7B,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;KAC1B,CAAC;KAED,6BAAc,GAAd,UAAe,MAAY,EAAE,QAAgB,EAAE,aAAuB;SAClE,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,cAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACzD,IAAI,CAAC,OAAO,GAAG,eAAI,CAAC,SAAS,CAAC,cAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,OAAO,CAAC;SAC5E,CAAC;SACD,IAAI,CAAC,CAAC;aACF,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;SAClC,CAAC;SAED,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;aAChB,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC;aACpB,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC;SACxB,CAAC;SACD,IAAI,CAAC,IAAI,GAAG,cAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,GAAG,cAAc,GAAG,MAAM,CAAC,IAAI,GAAG,eAAe,CAAC;KAC1F,CAAC;KAED,uBAAQ,GAAR;SACI,MAAM,CAAC,eAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;KAClD,CAAC;;KAED,uBAAQ,GAAR;SACI,MAAM,CAAC,eAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC;KAClE,CAAC;;KAED,qBAAM,GAAN;SACI,IAAI,IAAI,GAAG,IAAI,CAAC;SAChB,MAAM,CAAC,WAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;KAChE,CAAC;;KAED,kBAAG,GAAH,UAAI,EAAE;SACF,EAAE,CAAC,CAAC,EAAE,YAAY,WAAI,CAAC,CAAC,CAAC;aACrB,MAAM,CAAC,EAAE,CAAC;SACd,CAAC;SACD,MAAM,CAAC,WAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;KACzD,CAAC;;KAED,0BAAW,GAAX;SAAA,iBA4BC;SA3BG,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;aAC/B,IAAI,IAAI,GAAG,KAAI,CAAC;aAChB,IAAI,IAAI,GAAQ,EAAE,OAAO,EAAE,KAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAI,CAAC,IAAI,EAAE,CAAC;aAC3D,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,KAAK,CAAC,KAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;aACjC,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,KAAK,CAAC,KAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;aACjC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;iBAChB,IAAI,CAAC,OAAO,GAAG,eAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;aAC/C,CAAC;aACD,IAAI,IAAI,GAAG,qBAAqB,CAAC;aACjC,EAAE,CAAC,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC,CAAC;iBACV,cAAI,EAAE,CAAC,OAAO,CAAC,IAAI,GAAG,GAAG,GAAG,KAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO;qBAC7D,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;qBACzB,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;qBAC3C,OAAO,EAAE,CAAC;iBACd,CAAC,CAAC,CAAC;aACP,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,EAAE,CAAC,CAAC,KAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;qBAC1B,IAAI,IAAI,eAAe,GAAG,KAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC;iBACzD,CAAC;iBACD,cAAI,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO;qBAC9C,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;qBACzB,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;qBAC3C,OAAO,EAAE,CAAC;iBACd,CAAC,CAAC,CAAC;aACP,CAAC;SACL,CAAC,CAAC,CAAC;KACP,CAAC;;KAED,mBAAI,GAAJ;SACI,IAAI,IAAI,GAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;SAC3D,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SACjC,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SACjC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,eAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aAC1C,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;SAC7C,CAAC;SACD,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,eAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aAC1C,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;SAC7C,CAAC;SACD,IAAI,IAAI,GAAG,qBAAqB,CAAC;SACjC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;aAChB,IAAI,CAAC,OAAO,GAAG,eAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;SAC/C,CAAC;SACD,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;aACV,IAAI,IAAI,KAAK,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;SAClC,CAAC;SACD,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;aAC1B,IAAI,IAAI,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC;SACxD,CAAC;SACD,cAAI,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;aAC7C,2BAAY,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAC/C,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAE9C,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;iBAC5B,gBAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAC7B,CAAC;aACD,IAAI,SAAS,GAAG,EAAE,CAAC;aACnB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAU,IAAI;iBAClC,SAAS,IAAI,IAAI,GAAG,eAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC;aAC7D,CAAC,CAAC,CAAC;aACH,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBAC7B,gBAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC3B,CAAC;aACD,IAAI,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAChD,EAAE,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBAChC,gBAAM,CAAC,KAAK,CAAC,WAAW,GAAG,eAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC;aAC9D,CAAC;SACL,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;aACf,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;aACvC,gBAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SAC9B,CAAC,CAAC,CAAC;KACP,CAAC;;KAED,mBAAI,GAAJ,UAAK,EAAE;SACH,IAAI,IAAI,GAAG,IAAI,CAAC;SAEhB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACpB,cAAI,EAAE,CAAC,OAAO,CAAC,wBAAwB,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI;aAClE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;aACtB,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,UAAU,IAAI;iBACnC,IAAI,CAAC,GAAG,EAAE,CAAC;iBACX,IAAI,SAAS,GAAG,cAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,IAAI;qBACpD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC;iBAC5B,CAAC,CAAC,CAAC;iBACH,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;qBACZ,CAAC,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;iBACrB,CAAC;iBACD,MAAM,CAAC,IAAI,WAAI,CAAC;qBACZ,EAAE,EAAE,IAAI;qBACR,WAAW,EAAE,CAAC;kBACjB,CAAC;aACN,CAAC,CAAC,CAAC;aAEH,IAAI,CAAC,EAAE,GAAG,cAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,UAAU,IAAI;iBACnC,MAAM,CAAC,IAAI,WAAI,CAAC;qBACZ,EAAE,EAAE,IAAI;qBACR,WAAW,EAAE,cAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,IAAI;yBACjD,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC;qBAC5B,CAAC,CAAC,CAAC,CAAC,CAAC;kBACR,CAAC;aACN,CAAC,CAAC,CAAC;aAEH,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC;aAC5C,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAE3C,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,EAAE,CAAC;aACT,CAAC;SACL,CAAC,CAAC,CAAC;KACP,CAAC;;KAED,qBAAM,GAAN;SACI,EAAE,CAAC,CAAE,2BAAY,CAAC,aAA8B,CAAC,UAAU,KAAK,OAAO,CAAC,CAAC,CAAC;aACtE,cAAI,EAAE,CAAC,GAAG,CAAC,yBAAyB,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;iBACjD,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;iBAC3C,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAClD,CAAC,CAAC,CAAC;SACP,CAAC;SACD,IAAI,CAAC,CAAC;aACF,cAAI,EAAE,CAAC,MAAM,CAAC,0BAA0B,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;iBACrD,2BAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAClD,CAAC,CAAC,CAAC;SACP,CAAC;KACL,CAAC;;KAED,+BAAgB,GAAhB;SACI,MAAM,CAAC,cAAI,EAAE,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,EAAE,CAAC;KAChD,CAAC;KAED,mBAAI,GAAJ,UAAK,iBAAiB;SAClB,cAAI,EAAE,CAAC,GAAG,CAAC,kBAAkB,GAAG,iBAAiB,CAAC,EAAE,GAAG,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;aAC1E,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SAC/C,CAAC,CAAC,CAAC;KACP,CAAC;KAED,oBAAK,GAAL;SACI,cAAI,EAAE,CAAC,GAAG,CAAC,yBAAyB,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;aACjD,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SAC/C,CAAC,CAAC,CAAC;KACP,CAAC;KAED,6BAAc,GAAd,UAAe,UAAU,EAAE,OAAO;SAC9B,MAAM,CAAC,cAAI,EAAE,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,GAAG,aAAa,EAAE,UAAU,EAAE,OAAO,CAAC;KACrF,CAAC;KAED,8BAAe,GAAf;SAAA,iBAsCC;SArCG,cAAC,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,UAAC,gBAAgB;aAC5C,IAAI,aAAa,GAAG,IAAI,UAAU,CAAC,gBAAgB,CAAC,CAAC;aACrD,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,aAAa,CAAC;aAE3C,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE;aAC7B,QAAQ,CAAC,MAAM,CAAC,MAAM,EAAE,aAAa,CAAC,IAAI,CAAC;aAE3C,KAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;iBAC1B,GAAG,EAAE;qBACD,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;qBAE/B,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAgB;yBACrD,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;6BACrB,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;6BACxD,aAAa,CAAC,QAAQ,CAAC,UAAU,GAAG,UAAU,CAAC;6BAC/C,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;yBAC3B,CAAC;qBACL,CAAC,EAAE,KAAK,CAAC,CAAC;qBAEV,MAAM,CAAC,GAAG,CAAC;iBACf,CAAC;iBACD,QAAQ,EAAE;qBACN,KAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;qBACjF,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;iBAC3B,CAAC;cACJ,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;iBACX,aAAa,CAAC,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC;iBAC7B,aAAa,CAAC,QAAQ,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;iBACjD,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;iBAC7C,aAAa,CAAC,WAAW,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC;iBACpD,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC;iBACpC,aAAK,CAAC,OAAO,EAAE,CAAC;aACpB,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC;iBACN,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;iBACvC,gBAAM,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aAC9B,CAAC,CAAC;SACN,CAAC,CAAC;KACN,CAAC;KAGD,+BAAgB,GAAhB,UAAiB,UAAU;SACvB,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;SACjE,cAAI,EAAE,CAAC,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,GAAG,cAAc,GAAG,UAAU,CAAC,EAAE,CAAC;cAC/D,IAAI,CAAC;aACF,aAAK,CAAC,OAAO,EAAE,CAAC;SACpB,CAAC,CAAC,CAAC;KACX,CAAC;KACL,WAAC;AAAD,EAAC,CA1PyB,eAAK,GA0P9B;AA1PY,aAAI,OA0PhB;AAED;KAUI,eAAY,GAAG;SACX,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;SACf,IAAI,CAAC,IAAI,GAAG,UAAU,IAAmD;aAA7D,iBAoBX;aAnBG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;iBACR,IAAI,GAAG,EAAE,CAAC;aACd,CAAC;aACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;iBACnB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;aACxB,CAAC;aAED,MAAM,CAAC,cAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK;iBACpE,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAC,CAAC,CAAC;iBACtD,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,KAAK,CAAC,CAAC,CAAC;qBAC3B,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;qBACrB,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;yBACrB,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;qBACrB,CAAC;iBACL,CAAC;iBACD,IAAI,CAAC,CAAC;qBACF,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACrB,CAAC;aACL,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;KACN,CAAC;KAED,uBAAO,GAAP;SACI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;SACpB,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;KACvB,CAAC;KAED,2BAAW,GAAX;SACI,cAAI,EAAE,CAAC,GAAG,CAAC,sBAAsB,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;aAChG,2BAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;aAC3C,aAAK,CAAC,OAAO,EAAE,CAAC;SACpB,CAAC,CAAC,CAAC;SACH,IAAI,CAAC,eAAe,EAAE,CAAC;KAC3B,CAAC;KAED,6BAAa,GAAb,UAAc,iBAAiB;SAC3B,cAAI,EAAE,CAAC,GAAG,CAAC,kBAAkB,GAAG,iBAAiB,CAAC,EAAE,GAAG,GAAG,GAAG,cAAI,EAAE,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,cAAC,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;aACzH,2BAAY,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SAC/C,CAAC,CAAC,CAAC;KACP,CAAC;KACL,YAAC;AAAD,EAAC;AArDY,cAAK,QAqDjB;AAED,KAAI,UAAU,GAAG;KACb,KAAK,EAAE;SACH,MAAM,EAAE,UAAU;SAClB,OAAO,EAAE,EAAE;MACd;KACD,QAAQ,EAAE;SACN,MAAM,EAAE,UAAU;SAClB,OAAO,EAAE,EAAE;MACd;EACJ,CAAC;AAEF,eAAI,EAAE,CAAC,GAAG,CAAC,0DAA0D,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO;KACzF,cAAM,CAAC,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;AACtC,EAAC,CAAC,CAAC;AAEH,eAAI,EAAE,CAAC,GAAG,CAAC,uDAAuD,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO;KACtF,cAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACnC,EAAC,CAAC,CAAC;AAEQ,eAAM,GAAG,UAAU,CAAC;;;;;;;;;;;;;;ACnW/B,qCAAuD,CAAiB,CAAC;AACzE,wCAAkB,CAAoC,CAAC;AAEvD;KAA0B,wBAAK;KAM3B,cAAY,IAAI;SACZ,kBAAM,IAAI,CAAC,CAAC;KAChB,CAAC;KAED,uBAAQ,GAAR;SACI,MAAM,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,eAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;KACzH,CAAC;KAED,uBAAQ,GAAR,UAAS,EAAE;SACP,IAAI,IAAI,GAAG,IAAI,CAAC;SAChB,cAAI,EAAE,CAAC,GAAG,CAAC,0BAA0B,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,QAAQ;aACpE,IAAI,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,WAAW,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;aAC9E,EAAE,CAAC,CAAC,OAAO,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;iBAC3B,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;aACtC,CAAC;SACL,CAAC,CAAC;KACN,CAAC;KAED,sBAAO,GAAP,UAAQ,YAAY,EAAE,EAAE;SACpB,MAAM,CAAC,cAAC,CAAC,GAAG,CAAC,cAAC,CAAC,MAAM,CAAC,YAAY,EAAE,UAAU,IAAI;aAC9C,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SAC1B,CAAC,CAAC,EAAE,UAAU,IAAI;aACd,MAAM,CAAC,IAAI,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;SAC3D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACV,CAAC;KACL,WAAC;AAAD,EAAC,CA/ByB,eAAK,GA+B9B;AA/BY,aAAI,OA+BhB;AAED;KAOI;SACI,IAAI,CAAC,IAAI,GAAG;aAAA,iBAOX;aANG,cAAI,EAAE,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;iBAC1C,cAAC,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,KAAK,IAAI,KAAK,CAAC,OAAO,GAAG,IAAI,EAAC,CAAC,CAAC,CAAC;iBAClE,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBAC3B,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC1B,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aACzB,CAAC,CAAC,CAAC;SACP,CAAC,CAAC;KACN,CAAC;KAED,wBAAQ,GAAR,UAAU,MAAM,EAAE,OAAO,EAAE,OAAO;SAC9B,IAAI,UAAU,GAAG,eAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,CAAC;SAC1D,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;aACd,MAAM,CAAC,EAAE,CAAC;SACd,CAAC;SACD,IAAI,KAAK,GAAG,cAAC,CAAC,MAAM,CAChB,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI;aACtB,MAAM,CAAC,cAAC,CAAC,SAAS,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,KAAK,SAAS;SAC9D,CAAC,CAAC;cACG,MAAM,CAAC,OAAO,CAAC,EAAE,UAAU,IAAI;aAC5B,IAAI,eAAe,GAAG,EAAE,EAAE,gBAAgB,GAAG,EAAE,CAAC;aAChD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;iBACnB,eAAe,GAAG,eAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,WAAW,EAAE,CAAC;iBACrE,gBAAgB,GAAG,eAAI,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;uBACpE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;aACxD,CAAC;aACD,IAAI,QAAQ,GAAG,EAAE,CAAC;aAClB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;iBACZ,QAAQ,GAAG,eAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;aAC3D,CAAC;aAED,MAAM,CAAC,eAAe,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;iBAC7C,gBAAgB,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;iBAC3C,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;SAC5C,CAAC,CACR,CAAC;SACF,MAAM,CAAC,cAAC,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,OAAO;aACpC,MAAM,CAAC,cAAC,CAAC,SAAS,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC;SACpD,CAAC,CAAC,CAAC;KACP,CAAC;KAED,uBAAO,GAAP,UAAS,EAAE;SACP,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;KACpD,CAAC;KACL,YAAC;AAAD,EAAC;AApDY,cAAK,QAoDjB;;;;;;;;;;;;;;ACxFD,qCAAkD,CAAiB,CAAC;AAEpE;KAAoB,yBAAK;KAKrB;SACI,iBAAO,CAAC;SACR,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;SACb,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;SACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KACrB,CAAC;KAED,mCAAmB,GAAnB,UAAoB,KAAa;SAC7B,IAAI,KAAK,GAAG,CAAC;SACb,IAAI,MAAM,GAAG;aACT,CAAC,EAAE,eAAI,CAAC,SAAS,CAAC,MAAM,CAAC;aACzB,CAAC,EAAE,IAAI;aACP,CAAC,EAAE,IAAI;aACP,CAAC,EAAE,IAAI;aACP,CAAC,EAAE,IAAI;UACV;SACD,IAAI,OAAO,GAAG,KAAK;SACnB,OAAO,OAAO,IAAI,IAAI,IAAI,KAAK,GAAG,CAAC,EAAE,CAAC;aAClC,OAAO,GAAG,OAAO,GAAG,IAAI;aACxB,KAAK,EAAE;SACX,CAAC;SACD,MAAM,CAAC;aACH,EAAE,EAAE,OAAO;aACX,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC;UACvB;KACL,CAAC;KAED,uBAAO,GAAP;SAAA,iBAoBC;SAnBG,cAAI,EAAE,CAAC,GAAG,CAAC,wBAAwB,GAAG,eAAK,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;aAC7D,OAAO;aACP,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;aACxC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;aAE5C,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC;iBACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;iBACvD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;iBAC3D,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;aACrB,CAAC;aACD,IAAI,CAAC,CAAC;iBACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACpC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC5C,CAAC;aAED,KAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;aACtB,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;aACzB,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SAC3B,CAAC,CAAC,CAAC;KACP,CAAC;KACL,YAAC;AAAD,EAAC,CArDmB,eAAK,GAqDxB;AAAA,EAAC;AAES,cAAK,GAAG,IAAI,KAAK,EAAE,CAAC","file":"application.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b08261c6ae2c65988f8e\n **/","import { routes, ng } from 'entcore/entcore';\r\nimport { conversationController } from './controller';\r\n\r\nroutes.define(function ($routeProvider) {\r\n    $routeProvider\r\n        .when(\"/read-mail/:mailId\", {\r\n            action: \"readMail\"\r\n        })\r\n        .when(\"/write-mail/:userId\", {\r\n            action: \"writeMail\"\r\n        })\r\n        .when('/inbox', {\r\n            action: 'inbox'\r\n        })\r\n        .otherwise({\r\n            redirectTo: \"/inbox\"\r\n        })\r\n});\r\n\r\nng.controllers.push(conversationController)\n\n\n/** WEBPACK FOOTER **\n ** /source/app.ts\n **/","module.exports = entcore;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"entcore\"\n ** module id = 1\n ** module chunks = 0 1\n **/","import { ng, notify, idiom as lang, template, skin, workspace } from 'entcore/entcore';\r\nimport { Mail, User, UserFolder, Launcher, quota, conversation, Trash, SystemFolder } from './model/conversation';\r\n\r\nimport { $ } from 'entcore/libs/jquery/jquery';\r\nimport { _ } from 'entcore/libs/underscore/underscore';\r\n\r\nexport let conversationController = ng.controller('ConversationController', [\r\n    '$scope', '$timeout', 'model', 'route', function ($scope, $timeout, model, route) {\r\n        $scope.viewsContainers = {};\r\n        $scope.selection = {\r\n            selectAll: false\r\n        };\r\n        $scope.conversation = conversation;\r\n\r\n        $scope.openView = function (view: string, name: string) {\r\n            $scope.users.found = [];\r\n            $scope.users.search = '';\r\n\r\n            $scope.newItem = new Mail();\r\n            $scope.selection.selectAll = false;\r\n            var viewsPath = '/conversation/public/template/';\r\n            $scope.viewsContainers[name] = viewsPath + view + '.html'\r\n        }\r\n    \r\n        route({\r\n            readMail: function (params) {\r\n                conversation.folders.openFolder('inbox');\r\n                template.open('page', 'folders');\r\n                $scope.readMail(new Mail({ id: params.mailId }));\r\n            },\r\n            writeMail: function (params) {\r\n                conversation.folders.openFolder('inbox');\r\n                conversation.users.on('sync', function () {\r\n                    if (this.findWhere({ id: params.userId })) {\r\n                        template.open('page', 'folders');\r\n                        new User({ id: params.userId }).findData(function () {\r\n                            $scope.openView('write-mail', 'main');\r\n                            $scope.addUser(this);\r\n                        });\r\n                    }\r\n                    else {\r\n                        template.open('page', 'e401')\r\n                    }\r\n                });\r\n            },\r\n            inbox: function () {\r\n                conversation.folders.openFolder('inbox');\r\n                template.open('page', 'folders');\r\n            }\r\n        });\r\n\r\n        $scope.lang = lang;\r\n        $scope.notify = notify;\r\n        $scope.folders = conversation.folders;\r\n        $scope.userFolders = conversation.userFolders;\r\n        $scope.users = { list: conversation.users, search: '', found: [], foundCC: [] };\r\n        $scope.maxDepth = conversation.maxFolderDepth;\r\n        $scope.newItem = new Mail();\r\n        $scope.openView('inbox', 'main');\r\n        $scope.formatFileType = workspace.Document.role;\r\n\r\n        $scope.clearSearch = function () {\r\n            $scope.users.found = [];\r\n            $scope.users.search = '';\r\n        };\r\n\r\n        $scope.clearCCSearch = function () {\r\n            $scope.users.foundCC = [];\r\n            $scope.users.searchCC = '';\r\n        };\r\n\r\n        $scope.resetScope = function () {\r\n            $scope.openInbox();\r\n        };\r\n\r\n        $scope.containsView = function (name, view) {\r\n            var viewsPath = '/conversation/public/template/';\r\n            return $scope.viewsContainers[name] === viewsPath + view + '.html';\r\n        };\r\n\r\n        $scope.openFolder = function (folderName) {\r\n            if (!folderName) {\r\n                if (conversation.currentFolder instanceof UserFolder) {\r\n                    $scope.openUserFolder(conversation.currentFolder, {});\r\n                    return;\r\n                }\r\n                folderName = (conversation.currentFolder as SystemFolder).folderName;\r\n            }\r\n            $scope.mail = undefined;\r\n            conversation.folders.openFolder(folderName);\r\n            $scope.openView(folderName, 'main');\r\n        };\r\n\r\n        $scope.openUserFolder = function (folder, obj) {\r\n            $scope.mail = undefined\r\n            conversation.currentFolder = folder\r\n            folder.mails.full = false\r\n            folder.pageNumber = 0\r\n            obj.template = ''\r\n            folder.userFolders.sync(function () {\r\n                $timeout(function () {\r\n                    obj.template = 'folder-content'\r\n                }, 10)\r\n            })\r\n            folder.mails.sync()\r\n            $scope.openView('folder', 'main');\r\n\r\n            $timeout(function () {\r\n                $('body').trigger('whereami.update');\r\n            }, 100)\r\n        };\r\n\r\n        $scope.isParentOf = function (folder, targetFolder) {\r\n            if (!targetFolder || !targetFolder.parentFolder)\r\n                return false\r\n\r\n            var ancestor = targetFolder.parentFolder\r\n            while (ancestor) {\r\n                if (folder.id === ancestor.id)\r\n                    return true\r\n                ancestor = ancestor.parentFolder\r\n            }\r\n            return false\r\n        }\r\n\r\n        $scope.getSystemFolder = function (mail) {\r\n            if (mail.from !== model.me.userId && mail.state === \"SENT\")\r\n                return 'INBOX'\r\n            if (mail.from === model.me.userId && mail.state === \"SENT\")\r\n                return 'OUTBOX'\r\n            if (mail.from === model.me.userId && mail.state === \"DRAFT\")\r\n                return 'DRAFT'\r\n            return ''\r\n        }\r\n\r\n        $scope.matchSystemIcon = function (mail) {\r\n            var systemFolder = $scope.getSystemFolder(mail)\r\n            if (systemFolder === \"INBOX\")\r\n                return 'mail-in'\r\n            if (systemFolder === \"OUTBOX\")\r\n                return 'mail-out'\r\n            if (systemFolder === \"DRAFT\")\r\n                return 'mail-new'\r\n            return ''\r\n        }\r\n\r\n        $scope.variableMailAction = function (mail) {\r\n            var systemFolder = $scope.getSystemFolder(mail)\r\n            if (systemFolder === \"DRAFT\")\r\n                return $scope.editDraft(mail)\r\n            else if (systemFolder === \"OUTBOX\")\r\n                return $scope.viewMail(mail)\r\n            else\r\n                return $scope.readMail(mail)\r\n        }\r\n\r\n        $scope.removeFromUserFolder = function (event, mail) {\r\n            conversation.currentFolder.mails.selection().forEach(function (mail) {\r\n                mail.removeFromFolder();\r\n            });\r\n            conversation.currentFolder.mails.removeSelection();\r\n        };\r\n\r\n        $scope.nextPage = function () {\r\n            conversation.currentFolder.nextPage();\r\n        };\r\n\r\n        $scope.switchSelectAll = function () {\r\n            if ($scope.selection.selectAll) {\r\n                conversation.currentFolder.mails.selectAll();\r\n                if (conversation.currentFolder.userFolders)\r\n                    conversation.currentFolder.userFolders.selectAll()\r\n            }\r\n            else {\r\n                conversation.currentFolder.mails.deselectAll();\r\n                if (conversation.currentFolder.userFolders)\r\n                    conversation.currentFolder.userFolders.deselectAll()\r\n            }\r\n        };\r\n\r\n        function setCurrentMail(mail, doNotSelect?: boolean) {\r\n            conversation.currentFolder.mails.current = mail;\r\n            conversation.currentFolder.mails.deselectAll();\r\n            if (!doNotSelect)\r\n                conversation.currentFolder.mails.current.selected = true;\r\n            $scope.mail = mail;\r\n        }\r\n\r\n        $scope.viewMail = function (mail) {\r\n            $scope.openView('view-mail', 'main');\r\n            setCurrentMail(mail);\r\n            mail.open();\r\n        };\r\n\r\n        $scope.refresh = function () {\r\n            notify.info('updating');\r\n            conversation.currentFolder.mails.refresh();\r\n            conversation.folders.inbox.countUnread();\r\n        };\r\n\r\n        $scope.readMail = function (mail) {\r\n            $scope.openView('read-mail', 'main');\r\n            setCurrentMail(mail, true);\r\n            mail.open(function () {\r\n                if (!mail.state) {\r\n                    template.open('page', 'e404');\r\n                }\r\n                $scope.$root.$emit('refreshMails');\r\n            });\r\n        };\r\n\r\n        $scope.transfer = function () {\r\n            $scope.openView('write-mail', 'main');\r\n            $scope.newItem.parentConversation = $scope.mail;\r\n            $scope.newItem.setMailContent($scope.mail, 'transfer');\r\n            conversation.folders.draft.transfer($scope.newItem);\r\n        };\r\n\r\n        $scope.reply = function () {\r\n            $scope.openView('write-mail', 'main');\r\n            $scope.newItem.parentConversation = $scope.mail;\r\n            $scope.newItem.setMailContent($scope.mail, 'reply');\r\n            $scope.addUser($scope.mail.sender());\r\n        };\r\n\r\n        $scope.replyAll = function () {\r\n            $scope.openView('write-mail', 'main');\r\n            $scope.newItem.parentConversation = $scope.mail;\r\n            $scope.newItem.setMailContent($scope.mail,'reply', true);\r\n            $scope.newItem.to = _.filter($scope.newItem.to, function (user) { return user.id !== model.me.userId })\r\n            $scope.newItem.cc = _.filter($scope.newItem.cc, function (user) {\r\n                return user.id !== model.me.userId && !_.findWhere($scope.newItem.to, { id: user.id })\r\n            })\r\n            if (!_.findWhere($scope.newItem.to, { id: $scope.mail.sender().id }))\r\n                $scope.addUser($scope.mail.sender());\r\n        };\r\n\r\n        $scope.editDraft = function (draft) {\r\n            $scope.openView('write-mail', 'main');\r\n            draft.open();\r\n            $scope.newItem = draft;\r\n        };\r\n\r\n        $scope.saveDraft = function () {\r\n            notify.info('draft.saved');\r\n\r\n            conversation.folders.draft.saveDraft($scope.newItem);\r\n            $scope.openFolder(conversation.folders.draft.folderName);\r\n        };\r\n\r\n        $scope.sendMail = function () {\r\n            $scope.newItem.send();\r\n            $scope.openFolder(conversation.folders.outbox.folderName);\r\n        };\r\n\r\n        $scope.restore = function () {\r\n            if (conversation.folders.trash.mails.selection().length > 0)\r\n                conversation.folders.trash.restoreMails();\r\n            if (conversation.folders.trash.userFolders) {\r\n                var launcher = new Launcher(conversation.folders.trash.userFolders.selection().length, function () {\r\n                    conversation.folders.trash.userFolders.sync()\r\n                    $scope.refreshFolders()\r\n                })\r\n                _.forEach(conversation.folders.trash.userFolders.selection(), function (userFolder) {\r\n                    userFolder.restore().done(function () {\r\n                        launcher.launch()\r\n                    })\r\n                })\r\n            }\r\n        };\r\n\r\n        $scope.removeSelection = function () {\r\n            if (conversation.currentFolder.mails.selection().length > 0) {\r\n                conversation.currentFolder.mails.removeMails();\r\n            }\r\n            if (conversation.currentFolder.userFolders) {\r\n                var launcher = new Launcher(conversation.currentFolder.userFolders.selection().length, function () {\r\n                    conversation.currentFolder.sync()\r\n                    $scope.refreshFolders()\r\n                    $scope.getQuota()\r\n                })\r\n                _.forEach(conversation.currentFolder.userFolders.selection(), function (userFolder) {\r\n                    userFolder.delete().done(function () {\r\n                        launcher.launch()\r\n                    })\r\n                })\r\n            }\r\n        };\r\n\r\n        $scope.allReceivers = function (mail) {\r\n            var receivers = mail.to.slice(0);\r\n            mail.toName && mail.toName.forEach(function (deletedReceiver) {\r\n                receivers.push({\r\n                    deleted: true,\r\n                    displayName: deletedReceiver\r\n                });\r\n            });\r\n            return receivers;\r\n        }\r\n\r\n        $scope.filterUsers = function (mail) {\r\n            return function (user) {\r\n                if (user.deleted) {\r\n                    return true\r\n                }\r\n                var mapped = mail.map(user)\r\n                return typeof mapped !== 'undefined' && typeof mapped.displayName !== 'undefined' && mapped.displayName.length > 0\r\n            }\r\n        }\r\n\r\n        $scope.updateFoundCCUsers = function () {\r\n            var include = [];\r\n            var exclude = $scope.newItem.cc || [];\r\n            if ($scope.mail) {\r\n                include = _.map($scope.mail.displayNames, function (item) {\r\n                    return new User({ id: item[0], displayName: item[1] });\r\n                });\r\n            }\r\n            $scope.users.foundCC = conversation.users.findUser($scope.users.searchCC, include, exclude);\r\n        };\r\n\r\n        $scope.updateFoundUsers = function () {\r\n            var include = [];\r\n            var exclude = $scope.newItem.to || [];\r\n            if ($scope.mail) {\r\n                include = _.map($scope.mail.displayNames, function (item) {\r\n                    return new User({ id: item[0], displayName: item[1] });\r\n                });\r\n            }\r\n            $scope.users.found = conversation.users.findUser($scope.users.search, include, exclude);\r\n        };\r\n\r\n        $scope.addUser = function (user) {\r\n            if (!$scope.newItem.to) {\r\n                $scope.newItem.to = [];\r\n            }\r\n            if (user) {\r\n                $scope.newItem.currentReceiver = user;\r\n            }\r\n            $scope.newItem.to.push($scope.newItem.currentReceiver);\r\n        };\r\n\r\n        $scope.removeUser = function (user) {\r\n            $scope.newItem.to = _.reject($scope.newItem.to, function (item) { return item === user; });\r\n        };\r\n\r\n        $scope.addCCUser = function (user) {\r\n            if (!$scope.newItem.cc) {\r\n                $scope.newItem.cc = [];\r\n            }\r\n            if (user) {\r\n                $scope.newItem.currentCCReceiver = user;\r\n            }\r\n            $scope.newItem.cc.push($scope.newItem.currentCCReceiver);\r\n        };\r\n\r\n        $scope.removeCCUser = function (user) {\r\n            $scope.newItem.cc = _.reject($scope.newItem.cc, function (item) { return item === user; });\r\n        };\r\n\r\n        $scope.template = template\r\n        $scope.lightbox = {}\r\n\r\n        $scope.rootFolderTemplate = { template: 'folder-root-template' }\r\n        $scope.refreshFolders = function () {\r\n            $scope.userFolders.sync(function () {\r\n                $scope.rootFolderTemplate.template = \"\"\r\n                $timeout(function () {\r\n                    $scope.$apply()\r\n                    $scope.rootFolderTemplate.template = 'folder-root-template'\r\n                }, 100)\r\n            })\r\n        }\r\n\r\n        $scope.currentFolderDepth = function () {\r\n            if (!($scope.currentFolder instanceof UserFolder))\r\n                return 0\r\n\r\n            return $scope.currentFolder.depth();\r\n        }\r\n\r\n        $scope.moveSelection = function () {\r\n            $scope.destination = {}\r\n            $scope.lightbox.show = true\r\n            template.open('lightbox', 'move-mail')\r\n        }\r\n\r\n        $scope.moveToFolderClick = function (folder, obj) {\r\n            obj.template = ''\r\n\r\n            if (folder.userFolders.length() > 0) {\r\n                $timeout(function () {\r\n                    obj.template = 'move-folders-content'\r\n                }, 10)\r\n                return\r\n            }\r\n\r\n            folder.userFolders.sync(function () {\r\n                $timeout(function () {\r\n                    obj.template = 'move-folders-content'\r\n                }, 10)\r\n            })\r\n        }\r\n\r\n        $scope.moveMessages = function (folderTarget) {\r\n            $scope.lightbox.show = false\r\n            template.close('lightbox')\r\n            conversation.currentFolder.mails.moveSelection(folderTarget)\r\n        }\r\n\r\n        $scope.openNewFolderView = function () {\r\n            $scope.newFolder = new UserFolder();\r\n            if (conversation.currentFolder instanceof UserFolder) {\r\n                $scope.newFolder.parentFolderId = (conversation.currentFolder as UserFolder).id;\r\n            }\r\n            \r\n            $scope.lightbox.show = true\r\n            template.open('lightbox', 'create-folder')\r\n        }\r\n        $scope.createFolder = function () {\r\n            $scope.newFolder.create().done(function () {\r\n                $scope.refreshFolders()\r\n            })\r\n            $scope.lightbox.show = false\r\n            template.close('lightbox')\r\n        }\r\n        $scope.openRenameFolderView = function (folder) {\r\n            $scope.targetFolder = new UserFolder()\r\n            $scope.targetFolder.name = folder.name\r\n            $scope.targetFolder.id = folder.id\r\n            $scope.lightbox.show = true\r\n            template.open('lightbox', 'update-folder')\r\n        }\r\n        $scope.updateFolder = function () {\r\n            var current = $scope.currentFolder\r\n            $scope.targetFolder.update().done(function () {\r\n                current.name = $scope.targetFolder.name\r\n                $scope.$apply()\r\n            })\r\n            $scope.lightbox.show = false\r\n            template.close('lightbox')\r\n        }\r\n        $scope.trashFolder = function (folder) {\r\n            folder.trash().done(function () {\r\n                $scope.refreshFolders()\r\n                $scope.openFolder('trash')\r\n            })\r\n        }\r\n        $scope.restoreFolder = function (folder) {\r\n            folder.restore().done(function () {\r\n                $scope.refreshFolders()\r\n            })\r\n        }\r\n        $scope.deleteFolder = function (folder) {\r\n            folder.delete().done(function () {\r\n                $scope.refreshFolders()\r\n            })\r\n        }\r\n\r\n        var letterIcon = document.createElement(\"img\")\r\n        letterIcon.src = skin.theme + \"..\" + \"/img/icons/message-icon.png\"\r\n        $scope.drag = function (item, $originalEvent) {\r\n            $originalEvent.dataTransfer.setDragImage(letterIcon, 0, 0);\r\n            try {\r\n                $originalEvent.dataTransfer.setData('application/json', JSON.stringify(item));\r\n            } catch (e) {\r\n                $originalEvent.dataTransfer.setData('Text', JSON.stringify(item));\r\n            }\r\n        };\r\n        $scope.dropCondition = function (targetItem) {\r\n            return function (event) {\r\n                let dataField = event.dataTransfer.types.indexOf && event.dataTransfer.types.indexOf(\"application/json\") > -1 ? \"application/json\" : //Chrome & Safari\r\n                    event.dataTransfer.types.contains && event.dataTransfer.types.contains(\"application/json\") ? \"application/json\" : //Firefox\r\n                        event.dataTransfer.types.contains && event.dataTransfer.types.contains(\"Text\") ? \"Text\" : //IE\r\n                            undefined;\r\n\r\n                if (targetItem.foldersName && targetItem.foldersName !== 'trash')\r\n                    return undefined;\r\n\r\n                return dataField;\r\n            }\r\n        };\r\n\r\n        $scope.dropTo = function (targetItem, $originalEvent) {\r\n            var dataField = $scope.dropCondition(targetItem)($originalEvent)\r\n            var originalItem = JSON.parse($originalEvent.dataTransfer.getData(dataField))\r\n\r\n            if (targetItem.folderName === 'trash')\r\n                $scope.dropTrash(originalItem);\r\n            else\r\n                $scope.dropMove(originalItem, targetItem);\r\n        };\r\n\r\n        $scope.dropMove = function (mail, folder) {\r\n            var mailObj = new Mail()\r\n            mailObj.id = mail.id\r\n            mailObj.move(folder)\r\n        }\r\n        $scope.dropTrash = function (mail) {\r\n            var mailObj = new Mail()\r\n            mailObj.id = mail.id\r\n            mailObj.trash()\r\n        }\r\n\r\n        //Given a data size in bytes, returns a more \"user friendly\" representation.\r\n        $scope.getAppropriateDataUnit = quota.appropriateDataUnit;\r\n\r\n        $scope.formatSize = function (size) {\r\n            var formattedData = $scope.getAppropriateDataUnit(size)\r\n            return (Math.round(formattedData.nb * 10) / 10) + \" \" + formattedData.order\r\n        }\r\n\r\n\r\n        $scope.postAttachments = function () {\r\n            if (!$scope.newItem.id) {\r\n                conversation.folders.draft.saveDraft($scope.newItem)\r\n                    .then(() => $scope.newItem.postAttachments());\r\n            } else {\r\n                $scope.newItem.postAttachments();\r\n            }\r\n        }\r\n\r\n        $scope.deleteAttachment = function (event, attachment, mail) {\r\n            mail.deleteAttachment(attachment);\r\n        }\r\n\r\n        $scope.quota = quota;\r\n\r\n        $scope.sortBy = {\r\n            name: function (mail) {\r\n                var systemFolder = $scope.getSystemFolder(mail)\r\n                if (systemFolder === 'INBOX') {\r\n                    if (mail.fromName)\r\n                        return mail.fromName\r\n                    else\r\n                        return mail.sender().displayName\r\n                }\r\n                return _.chain(mail.displayNames)\r\n                    .filter(function (u) { return mail.to.indexOf(u[0]) >= 0 })\r\n                    .map(function (u) { return u[1] }).value().sort()\r\n            },\r\n            subject: function (mail) {\r\n                return mail.subject\r\n            },\r\n            date: function (mail) {\r\n                return mail.date\r\n            },\r\n            systemFolder: function (mail) {\r\n                var systemFolder = $scope.getSystemFolder(mail)\r\n                if (systemFolder === \"INBOX\")\r\n                    return 1\r\n                if (systemFolder === \"OUTBOX\")\r\n                    return 2\r\n                if (systemFolder === \"DRAFT\")\r\n                    return 3\r\n                return 0\r\n            }\r\n        }\r\n        $scope.setSort = function (box, sortFun) {\r\n            if (box.sort === sortFun) {\r\n                box.reverse = !box.reverse\r\n            } else {\r\n                box.sort = sortFun\r\n                box.reverse = false\r\n            }\r\n        }\r\n    }]);\n\n\n/** WEBPACK FOOTER **\n ** /source/controller.ts\n **/","// Copyright  WebServices pour l'ducation, 2014\r\n//\r\n// This file is part of ENT Core. ENT Core is a versatile ENT engine based on the JVM.\r\n//\r\n// This program is free software; you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as\r\n// published by the Free Software Foundation (version 3 of the License).\r\n//\r\n// For the sake of explanation, any module that communicate over native\r\n// Web protocols, such as HTTP, with ENT Core is outside the scope of this\r\n// license and could be license under its own terms. This is merely considered\r\n// normal use of ENT Core, and does not fall under the heading of \"covered work\".\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\nimport { http, idiom as lang, model, Model, notify, Collection } from 'entcore/entcore';\r\nimport { _ } from 'entcore/libs/underscore/underscore';\r\nimport { moment } from 'entcore/libs/moment/moment';\r\n\r\nimport { Folder, UserFolder, SystemFolder, SystemFolders, SystemFoldersCollection } from './folder';\r\nimport { User, Users, UsersCollection } from './user';\r\nimport { quota } from './quota';\r\n\r\nexport class Launcher {\r\n    action: () => void;\r\n    count: number;\r\n\r\n    constructor(countdown, action) {\r\n        this.count = countdown;\r\n        this.action = action;\r\n    }\r\n\r\n    launch() {\r\n        if (!--this.count) {\r\n            this.action()\r\n        }\r\n    }\r\n}\r\n\r\nclass Conversation extends Model {\r\n    folders: SystemFoldersCollection;\r\n    userFolders: Collection<UserFolder>;\r\n    users: UsersCollection;\r\n    systemFolders: string[];\r\n    currentFolder: Folder;\r\n    maxFolderDepth: number;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.collection(User, new Users);\r\n        this.collection(Folder, new SystemFolders());\r\n\r\n        this.folders.inbox.countUnread();\r\n\r\n        this.collection(UserFolder, {\r\n            sync: function (hook: () => void) {\r\n                http().get('folders/list').done((data) => {\r\n                    this.load(data)\r\n                    this.forEach(function (item) {\r\n                        item.userFolders.sync()\r\n                    })\r\n                    if (typeof hook === 'function') {\r\n                        hook();\r\n                    }\r\n                })\r\n            }\r\n        });\r\n\r\n        http().get('max-depth').done((result) => {\r\n            this.maxFolderDepth = parseInt(result['max-depth']);\r\n            this.trigger('change');\r\n        });\r\n    }\r\n\r\n    sync() {\r\n        this.userFolders.sync();\r\n        this.users.sync();\r\n        quota.refresh();\r\n    }\r\n}\r\n\r\nexport let conversation = new Conversation();\r\n\r\nmodel.build = function () {\r\n    conversation.sync();\r\n};\r\n\r\n\r\nexport * from './folder';\r\nexport * from './mail';\r\nexport * from './user';\r\nexport * from './quota';\n\n\n/** WEBPACK FOOTER **\n ** /source/model/conversation.ts\n **/","import {Model, http, Collection, notify } from 'entcore/entcore';\r\nimport { _ } from 'entcore/libs/underscore/underscore';\r\nimport { conversation } from './conversation';\r\nimport { Mail, Mails, MailsCollection } from './mail';\r\nimport { quota } from './quota';\r\n\r\nexport class Folder extends Model {\r\n    pageNumber: number;\r\n    mails: MailsCollection;\r\n    nbUnread: number;\r\n    userFolders: Collection<UserFolder>;\r\n\r\n    nextPage() {\r\n        if (!this.mails.full) {\r\n            this.pageNumber++;\r\n            this.mails.sync({ pageNumber: this.pageNumber, emptyList: false });\r\n        }\r\n    }\r\n}\r\n\r\nexport class SystemFolder extends Folder {\r\n    folderName: string;\r\n\r\n    constructor(api) {\r\n        super(api);\r\n\r\n        var thatFolder = this\r\n        this.pageNumber = 0;\r\n\r\n        this.collection(Mail, new Mails(api));\r\n    }\r\n}\r\n\r\nexport class Trash extends SystemFolder {\r\n    constructor() {\r\n        super({\r\n            get: '/conversation/list/trash'\r\n        });\r\n\r\n        this.folderName = 'trash';\r\n\r\n        this.collection(UserFolder, {\r\n            sync: function () {\r\n                var that = this\r\n                http().get('folders/list?trash=').done(function (data) {\r\n                    that.load(data)\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n    restoreMails () {\r\n        http().put('/conversation/restore?' + http().serialize({\r\n            id: _.pluck(this.mails.selection(), 'id')\r\n        }));\r\n        this.mails.removeSelection();\r\n        conversation.folders.inbox.mails.refresh();\r\n        conversation.folders.inbox.mails.refresh();\r\n        conversation.folders.inbox.mails.refresh();\r\n    }\r\n\r\n    removeMails () {\r\n        var request = http().delete('/conversation/delete?' + http().serialize({\r\n            id: _.pluck(this.mails.selection(), 'id')\r\n        }));\r\n        this.mails.removeSelection()\r\n        return request;\r\n    }\r\n}\r\n\r\nexport class Inbox extends SystemFolder {\r\n    constructor() {\r\n        super({\r\n            get: '/conversation/list/inbox'\r\n        });\r\n\r\n        this.folderName = 'inbox';\r\n    }\r\n\r\n    countUnread () {\r\n        http().get('/conversation/count/INBOX', { unread: true }).done((data) => {\r\n            this.nbUnread = parseInt(data.count);\r\n        });\r\n    }\r\n}\r\n\r\nexport class Draft extends SystemFolder {\r\n    constructor() {\r\n        super({\r\n            get: '/conversation/list/draft'\r\n        });\r\n\r\n        this.folderName = 'draft';\r\n    }\r\n\r\n    saveDraft(draft: Mail): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            draft.saveAsDraft().then(() => {\r\n                this.mails.push(draft);\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    transfer(mail: Mail) {\r\n        this.saveDraft(mail).then((id) => {\r\n            http().put(\"message/\" + mail.id + \"/forward/\" + mail.id).done(function () {\r\n                for (var i = 0; i < mail.attachments.length; i++) {\r\n                    mail.attachments.push(JSON.parse(JSON.stringify(mail.attachments[i])))\r\n                }\r\n                quota.refresh();\r\n            }).error(function (data) {\r\n                notify.error(data.error)\r\n            })\r\n        });\r\n    }\r\n}\r\n\r\nexport class Outbox extends SystemFolder {\r\n    constructor() {\r\n        super({\r\n            get: '/conversation/list/outbox'\r\n        });\r\n\r\n        this.folderName = 'outbox';\r\n    }\r\n}\r\n\r\nexport class UserFolder extends Folder {\r\n    id: string;\r\n    name: string;\r\n    parentFolderId: string;\r\n    parentFolder: UserFolder;\r\n\r\n    constructor(data?) {\r\n        super(data);\r\n\r\n        var thatFolder = this\r\n        this.pageNumber = 0;\r\n\r\n        this.collection(UserFolder, {\r\n            sync: function (hook?: () => void) {\r\n                var that = this\r\n                http().get('folders/list?parentId=' + thatFolder.id).done(function (data) {\r\n                    _.forEach(data, function (item) {\r\n                        item.parentFolder = thatFolder\r\n                    })\r\n                    that.load(data)\r\n                    that.forEach(function (item) {\r\n                        item.userFolders.sync()\r\n                    })\r\n\r\n                    if (typeof hook === 'function') {\r\n                        hook();\r\n                    }\r\n                    \r\n                })\r\n            }\r\n        })\r\n\r\n        this.collection(Mail, {\r\n            refresh: function () {\r\n                this.pageNumber = 0;\r\n                this.sync();\r\n            },\r\n            sync: function (pageNumber, emptyList) {\r\n                if (!pageNumber) {\r\n                    pageNumber = 0;\r\n                }\r\n                var that = this;\r\n                http().get('/conversation/list/' + thatFolder.id + '?restrain=&page=' + pageNumber).done(function (data) {\r\n                    data.sort(function (a, b) { return b.date - a.date })\r\n                    if (emptyList === false) {\r\n                        that.addRange(data);\r\n                        if (data.length === 0) {\r\n                            that.full = true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        that.load(data);\r\n                    }\r\n                });\r\n            },\r\n            removeMails: function () {\r\n                http().put('/conversation/trash?' + http().serialize({ id: _.pluck(this.selection(), 'id') })).done(function () {\r\n                    conversation.folders.trash.mails.refresh();\r\n                });\r\n                this.removeSelection();\r\n            },\r\n            moveSelection: function (destinationFolder) {\r\n                http().put('move/userfolder/' + destinationFolder.id + '?' + http().serialize({ id: _.pluck(this.selection(), 'id') })).done(function () {\r\n                    conversation.currentFolder.mails.refresh();\r\n                });\r\n            },\r\n            removeFromFolder: function () {\r\n                return http().put('move/root?' + http().serialize({ id: _.pluck(this.selection(), 'id') }))\r\n            }\r\n        });\r\n    }\r\n\r\n    depth(): number {\r\n        var depth = 1;\r\n        var ancestor = this.parentFolder;\r\n        while (ancestor) {\r\n            ancestor = ancestor.parentFolder;\r\n            depth = depth + 1;\r\n        }\r\n        return depth;\r\n    }\r\n    \r\n    create() {\r\n        var json = !this.parentFolderId ? {\r\n            name: this.name\r\n        } : {\r\n                name: this.name,\r\n                parentId: this.parentFolderId\r\n            }\r\n\r\n        return http().postJson('folder', json);\r\n    }\r\n\r\n    update() {\r\n        var json = {\r\n            name: this.name\r\n        }\r\n        return http().putJson('folder/' + this.id, json)\r\n    }\r\n\r\n    trash() {\r\n        return http().put('folder/trash/' + this.id)\r\n    }\r\n\r\n    restore() {\r\n        return http().put('folder/restore/' + this.id)\r\n    }\r\n\r\n    delete() {\r\n        return http().delete('folder/' + this.id)\r\n    }\r\n}\r\n\r\nexport class SystemFolders {\r\n    sync: any;\r\n    inbox: Inbox;\r\n    trash: Trash;\r\n    outbox: Outbox;\r\n    draft: Draft;\r\n    pageNumber: number;\r\n    systemFolders: string[];\r\n\r\n    constructor() {\r\n        this.sync = () => {\r\n            if (conversation.currentFolder === null) {\r\n                conversation.currentFolder = this.inbox;\r\n            }\r\n\r\n            conversation.currentFolder.mails.sync({ pageNumber: this.pageNumber });\r\n        };\r\n\r\n        this.inbox = new Inbox();\r\n        this.trash = new Trash();\r\n        this.draft = new Draft();\r\n        this.outbox = new Outbox();\r\n    }\r\n    \r\n    openFolder (folderName) {\r\n        conversation.currentFolder = this[folderName];\r\n        conversation.currentFolder.mails.sync();\r\n        conversation.currentFolder.pageNumber = 0;\r\n        conversation.currentFolder.mails.full = false;\r\n        if (conversation.currentFolder instanceof Trash) {\r\n            (conversation.currentFolder as Trash).userFolders.sync()\r\n        }\r\n        conversation.currentFolder.trigger('change');\r\n    }\r\n}\r\n\r\nexport interface SystemFoldersCollection extends Collection<SystemFolder>, SystemFolders { }\n\n\n/** WEBPACK FOOTER **\n ** /source/model/folder.ts\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 5\n ** module chunks = 0 1\n **/","import { Collection, Model, http, model, notify, idiom as lang } from 'entcore/entcore';\r\nimport { moment } from 'entcore/libs/moment/moment';\r\nimport { _ } from 'entcore/libs/underscore/underscore';\r\n\r\nimport { User } from './user';\r\nimport { conversation } from './conversation';\r\nimport { quota } from './quota';\r\nimport { SystemFolder } from './folder';\r\n\r\nexport class Attachment {\r\n    file: File;\r\n    progress: {\r\n        total: number,\r\n        completion: number\r\n    };\r\n    id: string;\r\n    filename: string;\r\n    size: number;\r\n    contentType: string;\r\n\r\n    constructor(file: File) {\r\n        this.file = file;\r\n        this.progress = {\r\n            total: 100,\r\n            completion: 0\r\n        }\r\n    }\r\n}\r\n\r\nexport class Mail extends Model {\r\n    id: string;\r\n    date: string;\r\n    displayNames: string[];\r\n    from: string;\r\n    subject: string;\r\n    body: string;\r\n    to: User[];\r\n    cc: User[];\r\n    unread: boolean;\r\n    parentConversation: Mail;\r\n    newAttachments: FileList;\r\n    loadingAttachments: Attachment[];\r\n    attachments: Attachment[];\r\n\r\n    constructor(data?) {\r\n        super(data);\r\n        this.loadingAttachments = [];\r\n        this.attachments = [];\r\n    }\r\n\r\n    setMailContent(origin: Mail, mailType: string, copyReceivers?: boolean) {\r\n        if (origin.subject.indexOf(format[mailType].prefix) === -1) {\r\n            this.subject = lang.translate(format[mailType].prefix) + origin.subject;\r\n        }\r\n        else {\r\n            this.subject = origin.subject;\r\n        }\r\n\r\n        if (copyReceivers) {\r\n            this.cc = origin.cc;\r\n            this.to = origin.to;\r\n        }\r\n        this.body = format[mailType].content + '<blockquote>' + origin.body + '</blockquote>';\r\n    }\r\n\r\n    sentDate() {\r\n        return moment(parseInt(this.date)).calendar();\r\n    };\r\n\r\n    longDate() {\r\n        return moment(parseInt(this.date)).format('dddd DD MMMM YYYY')\r\n    };\r\n\r\n    sender() {\r\n        var that = this;\r\n        return User.prototype.mapUser(this.displayNames, this.from);\r\n    };\r\n\r\n    map(id) {\r\n        if (id instanceof User) {\r\n            return id;\r\n        }\r\n        return User.prototype.mapUser(this.displayNames, id);\r\n    };\r\n\r\n    saveAsDraft(): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            var that = this;\r\n            var data: any = { subject: this.subject, body: this.body };\r\n            data.to = _.pluck(this.to, 'id');\r\n            data.cc = _.pluck(this.cc, 'id');\r\n            if (!data.subject) {\r\n                data.subject = lang.translate('nosubject');\r\n            }\r\n            var path = '/conversation/draft';\r\n            if (this.id) {\r\n                http().putJson(path + '/' + this.id, data).done(function (newData) {\r\n                    that.updateData(newData);\r\n                    conversation.folders.draft.mails.refresh();\r\n                    resolve();\r\n                });\r\n            }\r\n            else {\r\n                if (this.parentConversation) {\r\n                    path += '?In-Reply-To=' + this.parentConversation.id;\r\n                }\r\n                http().postJson(path, data).done(function (newData) {\r\n                    that.updateData(newData);\r\n                    conversation.folders.draft.mails.refresh();\r\n                    resolve();\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    send() {\r\n        var data: any = { subject: this.subject, body: this.body };\r\n        data.to = _.pluck(this.to, 'id');\r\n        data.cc = _.pluck(this.cc, 'id');\r\n        if (data.to.indexOf(model.me.userId) !== -1) {\r\n            conversation.folders['inbox'].nbUnread++;\r\n        }\r\n        if (data.cc.indexOf(model.me.userId) !== -1) {\r\n            conversation.folders['inbox'].nbUnread++;\r\n        }\r\n        var path = '/conversation/send?';\r\n        if (!data.subject) {\r\n            data.subject = lang.translate('nosubject');\r\n        }\r\n        if (this.id) {\r\n            path += 'id=' + this.id + '&';\r\n        }\r\n        if (this.parentConversation) {\r\n            path += 'In-Reply-To=' + this.parentConversation.id;\r\n        }\r\n        http().postJson(path, data).done(function (result) {\r\n            conversation.folders['outbox'].mails.refresh();\r\n            conversation.folders['draft'].mails.refresh();\r\n\r\n            if (parseInt(result.sent) > 0) {\r\n                notify.info('mail.sent');\r\n            }\r\n            var inactives = '';\r\n            result.inactive.forEach(function (name) {\r\n                inactives += name + lang.translate('invalid') + '<br />';\r\n            });\r\n            if (result.inactive.length > 0) {\r\n                notify.info(inactives);\r\n            }\r\n            var undelivered = result.undelivered.join(', ');\r\n            if (result.undelivered.length > 0) {\r\n                notify.error(undelivered + lang.translate('undelivered'));\r\n            }\r\n        }).e400(function (e) {\r\n            var error = JSON.parse(e.responseText);\r\n            notify.error(error.error);\r\n        });\r\n    };\r\n\r\n    open(cb) {\r\n        var that = this;\r\n\r\n        this.unread = false;\r\n        http().getJson('/conversation/message/' + this.id).done(function (data) {\r\n            that.updateData(data);\r\n            that.to = _.map(that.to, function (user) {\r\n                var n = '';\r\n                var foundUser = _.find(that.displayNames, function (name) {\r\n                    return name[0] === user;\r\n                });\r\n                if (foundUser) {\r\n                    n = foundUser[1];\r\n                }\r\n                return new User({\r\n                    id: user,\r\n                    displayName: n\r\n                })\r\n            });\r\n\r\n            that.cc = _.map(that.cc, function (user) {\r\n                return new User({\r\n                    id: user,\r\n                    displayName: _.find(that.displayNames, function (name) {\r\n                        return name[0] === user;\r\n                    })[1]\r\n                })\r\n            });\r\n\r\n            conversation.folders['inbox'].countUnread();\r\n            conversation.currentFolder.mails.refresh();\r\n\r\n            if (typeof cb === 'function') {\r\n                cb();\r\n            }\r\n        });\r\n    };\r\n\r\n    remove() {\r\n        if ((conversation.currentFolder as SystemFolder).folderName !== 'trash') {\r\n            http().put('/conversation/trash?id=' + this.id).done(function () {\r\n                conversation.currentFolder.mails.refresh();\r\n                conversation.folders['trash'].mails.refresh();\r\n            });\r\n        }\r\n        else {\r\n            http().delete('/conversation/delete?id=' + this.id).done(function () {\r\n                conversation.folders['trash'].mails.refresh();\r\n            });\r\n        }\r\n    };\r\n\r\n    removeFromFolder() {\r\n        return http().put('move/root?id=' + this.id)\r\n    }\r\n\r\n    move(destinationFolder) {\r\n        http().put('move/userfolder/' + destinationFolder.id + '?id=' + this.id).done(function () {\r\n            conversation.currentFolder.mails.refresh();\r\n        });\r\n    }\r\n\r\n    trash() {\r\n        http().put('/conversation/trash?id=' + this.id).done(function () {\r\n            conversation.currentFolder.mails.refresh();\r\n        });\r\n    }\r\n\r\n    postAttachment(attachment, options) {\r\n        return http().postFile(\"message/\" + this.id + \"/attachment\", attachment, options)\r\n    }\r\n\r\n    postAttachments() {\r\n        _.forEach(this.newAttachments, (targetAttachment) => {\r\n            let attachmentObj = new Attachment(targetAttachment);\r\n            this.loadingAttachments.push(attachmentObj)\r\n\r\n            let formData = new FormData()\r\n            formData.append('file', attachmentObj.file)\r\n\r\n            this.postAttachment(formData, {\r\n                xhr: () => {\r\n                    var xhr = new XMLHttpRequest();\r\n\r\n                    xhr.upload.addEventListener(\"progress\", (e: ProgressEvent) => {\r\n                        if (e.lengthComputable) {\r\n                            var percentage = Math.round((e.loaded * 100) / e.total);\r\n                            attachmentObj.progress.completion = percentage;\r\n                            this.trigger('change');\r\n                        }\r\n                    }, false);\r\n\r\n                    return xhr;\r\n                },\r\n                complete: () => {\r\n                    this.loadingAttachments.splice(this.loadingAttachments.indexOf(attachmentObj), 1)\r\n                    this.trigger('change');\r\n                }\r\n            }).done((result) => {\r\n                attachmentObj.id = result.id;\r\n                attachmentObj.filename = attachmentObj.file.name;\r\n                attachmentObj.size = attachmentObj.file.size;\r\n                attachmentObj.contentType = attachmentObj.file.type;\r\n                this.attachments.push(attachmentObj)\r\n                quota.refresh();\r\n            }).e400((e) => {\r\n                var error = JSON.parse(e.responseText);\r\n                notify.error(error.error);\r\n            })\r\n        })\r\n    }\r\n    \r\n\r\n    deleteAttachment(attachment) {\r\n        this.attachments.splice(this.attachments.indexOf(attachment), 1);\r\n        http().delete(\"message/\" + this.id + \"/attachment/\" + attachment.id)\r\n            .done(() => {\r\n                quota.refresh();\r\n            });\r\n    }\r\n}\r\n\r\nexport class Mails {\r\n    pageNumber: number;\r\n    api: any;\r\n    sync: any;\r\n    full: boolean;\r\n    removeSelection: () => void;\r\n    addRange: (data: Mail[], cb?: (item: Mail) => void, refreshView?: boolean) => void;\r\n    load: (data: Mail[], cb?: (item: Mail) => void, refreshView?: boolean) => void;\r\n    selection: () => Mail[];\r\n\r\n    constructor(api) {\r\n        this.api = api;\r\n        this.sync = function (data?: { pageNumber?: number, emptyList?: boolean }): any {\r\n            if (!data) {\r\n                data = {};\r\n            }\r\n            if (!data.pageNumber) {\r\n                data.pageNumber = 0;\r\n            }\r\n\r\n            return http().get(this.api.get + '?page=' + data.pageNumber).done((mails) => {\r\n                mails.sort(function (a, b) { return b.date - a.date })\r\n                if (data.emptyList === false) {\r\n                    this.addRange(mails);\r\n                    if (mails.length === 0) {\r\n                        this.full = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this.load(mails);\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n    refresh() {\r\n        this.pageNumber = 0;\r\n        return this.sync();\r\n    }\r\n\r\n    removeMails() {\r\n        http().put('/conversation/trash?' + http().serialize({ id: _.pluck(this.selection(), 'id') })).done(function () {\r\n            conversation.folders.trash.mails.refresh();\r\n            quota.refresh();\r\n        });\r\n        this.removeSelection();\r\n    }\r\n\r\n    moveSelection(destinationFolder) {\r\n        http().put('move/userfolder/' + destinationFolder.id + '?' + http().serialize({ id: _.pluck(this.selection(), 'id') })).done(function () {\r\n            conversation.currentFolder.mails.refresh();\r\n        });\r\n    }\r\n}\r\n\r\nlet mailFormat = {\r\n    reply: {\r\n        prefix: 'reply.re',\r\n        content: ''\r\n    },\r\n    transfer: {\r\n        prefix: 'reply.fw',\r\n        content: ''\r\n    }\r\n};\r\n\r\nhttp().get('/conversation/public/template/mail-content/transfer.html').done(function (content) {\r\n    format.transfer.content = content;\r\n});\r\n\r\nhttp().get('/conversation/public/template/mail-content/reply.html').done(function (content) {\r\n    format.reply.content = content;\r\n});\r\n\r\nexport let format = mailFormat;\r\nexport interface MailsCollection extends Collection<Mail>, Mails { }\n\n\n/** WEBPACK FOOTER **\n ** /source/model/mail.ts\n **/","import { Model, http, idiom as lang, Collection } from 'entcore/entcore';\r\nimport { _ } from 'entcore/libs/underscore/underscore';\r\n\r\nexport class User extends Model {\r\n    displayName: string;\r\n    name: string;\r\n    profile: string;\r\n    id: string;\r\n\r\n    constructor(data) {\r\n        super(data);\r\n    }\r\n\r\n    toString() {\r\n        return (this.displayName || '') + (this.name || '') + (this.profile ? ' (' + lang.translate(this.profile) + ')' : '')\r\n    }\r\n\r\n    findData(cb) {\r\n        var that = this;\r\n        http().get('/userbook/api/person?id=' + this.id).done(function (userData) {\r\n            that.updateData({ id: that.id, displayName: userData.result[0].displayName });\r\n            if (typeof cb === \"function\") {\r\n                cb.call(that, userData.result[0]);\r\n            }\r\n        })\r\n    }\r\n\r\n    mapUser(displayNames, id) {\r\n        return _.map(_.filter(displayNames, function (user) {\r\n            return user[0] === id;\r\n        }), function (user) {\r\n            return new User({ id: user[0], displayName: user[1] });\r\n        })[0];\r\n    }\r\n}\r\n\r\nexport class Users {\r\n    filter: (filter: (item: User) => boolean) => User[];\r\n    findWhere: (filter: any) => User;\r\n    addRange: (data: User[], cb?: (item: User) => void, refreshView?: boolean) => void;\r\n    sync: any;\r\n    trigger: (event: string) => void;\r\n\r\n    constructor() {\r\n        this.sync = function() {\r\n            http().get('/conversation/visible').done((data) => {\r\n                _.forEach(data.groups, function (group) { group.isGroup = true });\r\n                this.addRange(data.groups);\r\n                this.addRange(data.users);\r\n                this.trigger('sync');\r\n            });\r\n        };\r\n    }\r\n\r\n    findUser (search, include, exclude): User[] {\r\n        var searchTerm = lang.removeAccents(search).toLowerCase();\r\n        if (!searchTerm) {\r\n            return [];\r\n        }\r\n        var found = _.filter(\r\n            this.filter(function (user) {\r\n                return _.findWhere(include, { id: user.id }) === undefined\r\n            })\r\n                .concat(include), function (user) {\r\n                    var testDisplayName = '', testNameReversed = '';\r\n                    if (user.displayName) {\r\n                        testDisplayName = lang.removeAccents(user.displayName).toLowerCase();\r\n                        testNameReversed = lang.removeAccents(user.displayName.split(' ')[1] + ' '\r\n                            + user.displayName.split(' ')[0]).toLowerCase();\r\n                    }\r\n                    var testName = '';\r\n                    if (user.name) {\r\n                        testName = lang.removeAccents(user.name).toLowerCase();\r\n                    }\r\n\r\n                    return testDisplayName.indexOf(searchTerm) !== -1 ||\r\n                        testNameReversed.indexOf(searchTerm) !== -1 ||\r\n                        testName.indexOf(searchTerm) !== -1;\r\n                }\r\n        );\r\n        return _.reject(found, function (element) {\r\n            return _.findWhere(exclude, { id: element.id });\r\n        });\r\n    }\r\n\r\n    isGroup (id) {\r\n        return this.findWhere({ isGroup: true, id: id })\r\n    }\r\n}\r\n\r\nexport interface UsersCollection extends Users, Collection<User> { }\n\n\n/** WEBPACK FOOTER **\n ** /source/model/user.ts\n **/","import { http, model, Model, idiom as lang } from 'entcore/entcore';\r\n\r\nclass Quota extends Model {\r\n    max: number;\r\n    used: number;\r\n    unit: string;\r\n\r\n    constructor() {\r\n        super();\r\n        this.max = 1;\r\n        this.used = 0;\r\n        this.unit = 'Mo';\r\n    }\r\n\r\n    appropriateDataUnit(bytes: number) {\r\n        var order = 0\r\n        var orders = {\r\n            0: lang.translate(\"byte\"),\r\n            1: \"Ko\",\r\n            2: \"Mo\",\r\n            3: \"Go\",\r\n            4: \"To\"\r\n        }\r\n        var finalNb = bytes\r\n        while (finalNb >= 1024 && order < 4) {\r\n            finalNb = finalNb / 1024\r\n            order++\r\n        }\r\n        return {\r\n            nb: finalNb,\r\n            order: orders[order]\r\n        }\r\n    }\r\n\r\n    refresh () {\r\n        http().get('/workspace/quota/user/' + model.me.userId).done((data) => {\r\n            //to mo\r\n            data.quota = data.quota / (1024 * 1024);\r\n            data.storage = data.storage / (1024 * 1024);\r\n\r\n            if (data.quota > 2000) {\r\n                data.quota = Math.round((data.quota / 1024) * 10) / 10;\r\n                data.storage = Math.round((data.storage / 1024) * 10) / 10;\r\n                this.unit = 'Go';\r\n            }\r\n            else {\r\n                data.quota = Math.round(data.quota);\r\n                data.storage = Math.round(data.storage);\r\n            }\r\n\r\n            this.max = data.quota;\r\n            this.used = data.storage;\r\n            this.trigger('change');\r\n        });\r\n    }\r\n};\r\n\r\nexport let quota = new Quota();\n\n\n/** WEBPACK FOOTER **\n ** /source/model/quota.ts\n **/"],"sourceRoot":""}